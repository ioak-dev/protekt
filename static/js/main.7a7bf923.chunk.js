(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){},102:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},157:function(e,t,a){e.exports=a(325)},162:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},195:function(e,t){},197:function(e,t){},232:function(e,t){},233:function(e,t){},298:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){},323:function(e,t,a){},324:function(e,t,a){},325:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(38),o=a.n(s),r=(a(162),a(1)),l=a(2),c=a(4),u=a(3),m=a(5),h=a(19),d=a(41),p=a(150),f=a(11),g={isAuth:!1,token:"",secret:"",name:"",password:""},v={theme:"theme_dark",textSize:"textsize_medium",themeColor:"themecolor_6"},E=Object(d.c)({authorization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_AUTH":return console.log("GET_AUTH reducer"),Object(f.a)({},e);case"ADD_AUTH":return console.log("ADD_AUTH reducer"),Object(f.a)({},e,t.payload);case"REMOVE_AUTH":return console.log("REMOVE_AUTH reducer"),Object(f.a)({},e,{isAuth:!1,token:"",secret:"",name:"",password:""});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROFILE":return console.log("GET_PROFILE reducer"),Object(f.a)({},e);case"SET_PROFILE":return console.log("SET_PROFILE reducer"),Object(f.a)({},e,t.payload);default:return e}}}),b=[p.a],k=Object(d.e)(E,{},Object(d.d)(d.a.apply(void 0,b))),y=(a(101),a(167),a(168),a(30)),N=(a(169),new(a(341).a));function w(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0;N.next({name:e,signal:t,data:a})}function O(){return N.asObservable()}var C=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){w("navbar-transparency")}},{key:"componentWillUnmount",value:function(){w("navbar-transparency",!1)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"home"},i.a.createElement("div",{className:"section parallax bg bg2"}),i.a.createElement("div",{className:"section static bg2 even"},i.a.createElement("h3",null,"Secured suite of applications"),i.a.createElement("p",null,"Designed with security as a primary factor from ground up"),i.a.createElement("p",null,"Your passwords never leaves your workstation"),i.a.createElement("p",null,"Our servers have zero knowledge about your password"))))}}]),t}(i.a.Component),P=a(17),S=a(26),_=(a(102),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).edit=function(){a.props.editBookmark(a.props.bookmark)},a.delete=function(){a.props.deleteBookmark(a.props.id)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=[];return this.props.bookmark.tags&&this.props.bookmark.tags.split(" ").map(function(a){t.push(i.a.createElement("div",{className:"tag",key:a,onClick:function(){return e.props.searchByTag(a)}},a))}),i.a.createElement("div",null,i.a.createElement("div",{className:"title typography-4"},this.props.bookmark.title,i.a.createElement("div",{className:"action-icon"},i.a.createElement("i",{onClick:this.edit,className:"material-icons"},"edit"),i.a.createElement("i",{onClick:this.delete,className:"material-icons"},"delete"))),i.a.createElement("div",{className:"url typography-6"},i.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:this.props.bookmark.href},this.props.bookmark.href)),i.a.createElement("div",{className:"timestamp typography-6 space-bottom-1"},this.props.bookmark.createdAt),t)}}]),t}(n.Component)),j={API_URL_PRESIGNUP:"/auth/keys",API_URL_SIGNUP:"/auth/signup",API_URL_PRESIGNIN:"/auth/keys/",API_URL_SIGNIN:"/auth/signin",API_URL_RESET:"/auth/reset",API_URL_CODE:"/auth/sendResetCode",API_URL_BOOKMARK:"/bookmark",API_URL_BOOKMARK_IMPORT:"/bookmark/import",API_URL_MAIL:"/bookmark/sendExportMail",API_URL_PREFERENCES:"/user/preferences",API_URL_USER_DETAILS:"/user/details",API_URL_NOTE:"/note"},A=(a(170),function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).escFunction=function(e){27===e.keyCode&&a.props.visible&&a.props.toggleVisibility()},a.getDialogStyle=function(){var e="";return e+=a.props.small?" small":"",e+=a.props.fullscreen?" fullscreen":""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.visible!==e.visible&&(e.visible?(w("dialog"),document.body.classList.add("oak-dialog-open")):(w("dialog",!1),document.body.classList.remove("oak-dialog-open")))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.escFunction,!1);var e=document.documentElement.clientWidth,t=window.innerWidth-e;document.documentElement.style.setProperty("--scrollbar-width",t+"px")}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.escFunction,!1)}},{key:"render",value:function(){return i.a.createElement("div",{className:"oak-dialog"},i.a.createElement("div",{className:this.props.visible?"dialog show "+this.getDialogStyle():"dialog hide "+this.getDialogStyle()},i.a.createElement("div",{className:this.props.visible?"container":"container hidetext"},i.a.createElement("div",{className:"dialog-header"},i.a.createElement("div",{className:"container",onClick:this.props.toggleVisibility},i.a.createElement("i",{className:"material-icons"},"close"),i.a.createElement("div",{className:"text-esc"},"esc"))),this.props.children)))}}]),t}(n.Component)),z=(a(171),a(172),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getStyle=function(){var e=a.props.theme?a.props.theme:"";return e+=a.props.variant?" "+a.props.variant:"",a.props.children||(e+=" icon"),e+=a.props.invert?" invert":"",e+=a.props.small?" small":"",e+=a.props.align?" align-"+a.props.align:""},a.state={menuActive:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("button",{className:"oak-button "+this.getStyle(),onClick:this.props.action},this.props.icon&&i.a.createElement("i",{className:"material-icons"},this.props.icon),this.props.children&&this.props.children)}}]),t}(n.Component)),x=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,a.viewPort=window.matchMedia("(max-width: 767px)"),a.viewPortChange=function(e){a.setState({mobileViewPort:e.matches})},a.toggleSideView=function(){w("sidebar",!a.state.showSide)},a.state={views:a.props.children,showSide:!1,mobileViewPort:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.initializeViews()}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,this.viewPortChange(this.viewPort),this.viewPort.addListener(this.viewPortChange),O().subscribe(function(t){e._isMounted&&"sidebar"===t.name&&e.setState({showSide:t.signal})})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"initializeViews",value:function(){var e=this;i.a.Children.toArray(this.state.views).forEach(function(t){t.props.main?e.setState({main:t}):t.props.side&&e.setState({side:t})})}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.children&&this.setState({views:e.children},function(){t.initializeViews()})}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,!this.state.mobileViewPort&&i.a.createElement("div",{className:"view-desktop"},this.state.side&&i.a.createElement("div",{className:"view-side"},this.state.side),i.a.createElement("div",{className:"view-content"+(this.state.side?" side-present":"")},this.state.main)),this.state.mobileViewPort&&i.a.createElement("div",{className:"view-mobile"},i.a.createElement("div",{className:this.state.showSide?"slider show":"slider hide"},i.a.createElement("div",{className:"topbar",onClick:this.toggleSideView},i.a.createElement("div",null,i.a.createElement(z,{theme:"default",variant:"disabled",action:this.toggleSideView},!this.state.showSide&&i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"material-icons"},"expand_more"),this.props.sideLabel?this.props.sideLabel:"Menu"),this.state.showSide&&i.a.createElement(i.a.Fragment,null,i.a.createElement("i",{className:"material-icons"},"expand_less"),"Collapse")))),i.a.createElement("div",{className:"view-side"},this.state.showSide&&this.state.side)),!this.state.showSide&&i.a.createElement("div",{className:"view-main"},this.state.main)))}}]),t}(n.Component),L=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,this.props.children)}}]),t}(n.Component),R=a(340);function T(e){return null===e||null!==e.match(/^ *$/)}function I(e,t){var a=!1;return t&&t.split(" ").forEach(function(t){e.match(new RegExp("(\\w*"+t+"\\w*)","gi"))&&(a=!0)}),a}a(173);var U=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,a.toggle=function(){a.setState({show:!a.state.show},function(){return w("sidebarExpanded",a.state.show,{label:a.props.label})})},a.hide=function(){a.setState({show:!1})},a.state={show:!!a.props.show,elements:a.props.elements?a.props.elements:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,O().subscribe(function(t){e._isMounted&&"sidebarExpanded"===t.name&&t.signal&&t.data&&t.data.label!==e.props.label&&e.setState({show:!1})})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state.elements.map(function(e){return i.a.createElement("div",{key:e.label,className:"element",onClick:e.action},i.a.createElement("i",{className:"material-icons"},e.icon),e.label)});return i.a.createElement("div",{className:"sidebar"},i.a.createElement("div",{className:this.state.show?"header active":"header",onClick:this.toggle},i.a.createElement("div",{className:"label"},i.a.createElement("i",{className:"material-icons"},this.props.icon),this.props.label,void 0!==this.props.number&&i.a.createElement("div",{className:"number"},this.props.number)),i.a.createElement("div",{className:"aria"},i.a.createElement("i",{className:this.state.show?"material-icons collapse":"material-icons"},"keyboard_arrow_left"))),i.a.createElement("div",{className:this.state.show?"content show "+(this.props.animate?"animate":"static"):"content hide "+(this.props.animate?"animate":"static")},e,this.props.children))}}]),t}(n.Component),F=a(61),D=a.n(F),M=a(52),B=a.n(M),V=a(53),W=a.n(V),G="https://protekt-express.herokuapp.com",H=["_id","id","createdAt","lastModifiedAt","userId"],K=["/auth/keys","/auth/signup","/auth/keys/","/auth/signin","/auth/reset","/auth/sendResetCode"];function q(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return console.log(a),D.a.get(G+e,t).then(function(t){return K.find(function(t){return e.includes(t)})||(t.data=Z(t.data,a,n)),Promise.resolve(t)})}function Y(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return K.find(function(t){return e.includes(t)})||(t=Q(t,n,i)),D.a.post(G+e,t,a).then(function(t){return K.find(function(t){return e.includes(t)})||(t.data=Z(t.data,n,i)),Promise.resolve(t)})}function $(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return K.find(function(t){return e.includes(t)})||(t=Q(t,n,i)),D.a.put(G+e,t,a).then(function(t){return K.find(function(t){return e.includes(t)})||(t.data=Z(t.data,n,i)),Promise.resolve(t)})}function J(e,t){return D.a.delete(G+e,t)}function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(Array.isArray(e)){var n=[];return e.forEach(function(e){return n.push(X(e,t,a))}),n}return X(e,t,a)}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n={};for(var i in e)!e[i]||a.includes(i)||H.includes(i)?n[i]=e[i]:n[i]=te(t,e[i],"aasd");return n}function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(Array.isArray(e)){var n=[];return e.forEach(function(e){return n.push(ee(e,t,a))}),n}return ee(e,t,a)}function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n={};for(var i in e)!e[i]||a.includes(i)||H.includes(i)?n[i]=e[i]:n[i]=ae(t,e[i]);return n}function te(e,t,a){var n={cipher:"aes",iter:"12000",ks:256,salt:W.a.enc.Base64.stringify(W.a.enc.Utf8.parse(a))};return B.a.encrypt(e,t,n)}function ae(e,t){return B.a.decrypt(e,t)}a(298);var ne=function(e){return i.a.createElement("div",{className:"oak-text-field"},i.a.createElement("label",null,e.label),!e.multiline&&i.a.createElement("input",{disabled:e.disabled,autoComplete:"off",className:(e.errorFields&&e.errorFields[e.id]?"error":"")+(e.disabled?" disabled":""),type:e.type?e.type:"text",name:e.id,value:e.data[e.id],onChange:e.handleChange}),e.multiline&&i.a.createElement("textarea",{disabled:e.disabled,rows:e.rows?e.rows:4,className:(e.errorFields&&e.errorFields[e.id]?"error":"")+(e.disabled?" disabled":""),name:e.id,value:e.data[e.id],onChange:e.handleChange}))},ie=a(68),se=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggleEditDialog=function(){a.setState({isEditDialogOpen:!a.state.isEditDialogOpen,id:void 0,title:"",href:"",tags:"",editDialogLabel:"Add"})},a.editBookmark=function(e){a.setState({isEditDialogOpen:!0,id:e._id,title:e.title,href:e.href,tags:e.tags,editDialogLabel:"Save"})},a.deleteBookmark=function(e){var t=Object(S.a)(a);J(j.API_URL_BOOKMARK+"/"+e,{headers:{Authorization:"Bearer "+a.props.authorization.token}}).then(function(e){201===e.status&&(w("notification",!0,{type:"success",message:"Bookmark deleted",duration:5e3}),t.initializeBookmarks(t.props.authorization))}).catch(function(e){401===e.response.status&&t.props.logout(null,"failure","Session expired. Login again")})},a.clearSearch=function(){a.setState({view:a.state.items,isFiltered:!1,searchtext:""}),w("sidebar",!1)},a.searchByTag=function(e){a.setState({searchPref:Object(f.a)({},a.state.searchPref,{title:!1,tags:!0,href:!1}),searchtext:e,isFiltered:!0},function(){return a.initializeBookmarks(a.props.authorization)})},a.search=function(e){e&&e.preventDefault(),T(a.state.searchtext)?a.setState({view:a.state.items,isFiltered:!1}):(a.setState({view:a.state.items.filter(function(e){return!(!a.state.searchPref.title||!I(e.title,a.state.searchtext))||(!(!a.state.searchPref.tags||!I(e.tags,a.state.searchtext))||(!(!a.state.searchPref.href||!I(e.href,a.state.searchtext))||void 0))}),isFiltered:!0}),w("sidebar",!1))},a.toggleSearchPref=function(e){a.setState({searchPref:Object(f.a)({},a.state.searchPref,Object(P.a)({},e,!a.state.searchPref[e]))})},a.addBookmark=function(){var e=Object(S.a)(a),t={id:a.state.id,title:a.state.title,href:a.state.href,tags:a.state.tags};T(t.title)?w("notification",!0,{type:"failure",message:"Title / description missing",duration:5e3}):T(t.href)?w("notification",!0,{type:"failure",message:"Website URL / Link is missing",duration:5e3}):(T(t.tags)&&(t.tags="unsorted"),$(j.API_URL_BOOKMARK,t,{headers:{Authorization:"Bearer "+a.props.authorization.token}},a.props.authorization.password).then(function(t){201===t.status&&(w("notification",!0,{type:"success",message:"Bookmark created",duration:5e3}),e.toggleEditDialog(),e.initializeBookmarks(e.props.authorization))}).catch(function(t){401===t.response.status&&e.props.logout(null,"failure","Session expired. Login again")}))},a.handleChange=function(e){a.setState(Object(f.a)({},a.state,Object(P.a)({},e.currentTarget.name,e.currentTarget.value)))},a.state={items:[],view:[],isEditDialogOpen:!1,searchtext:"",isFiltered:!1,id:void 0,title:"",href:"",tags:"",editDialogLabel:"Add",firstLoad:!0,searchPref:{title:!0,tags:!0,href:!0,content:!0},sidebarElements:{addNew:[{label:"New Bookmark",action:a.toggleEditDialog,icon:"note_add"}]}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){if(this.props.location.search){var e=ie.parse(this.props.location.search);e&&e.q&&(e.q.startsWith("tags")&&this.setState({searchPref:{title:!1,tags:!0,href:!0,content:!1}}),this.setState({searchtext:e.q,isFiltered:!0}))}this.state.firstLoad&&this.props.authorization.isAuth&&(this.initializeBookmarks(this.props.authorization),this.setState({firstLoad:!1}))}},{key:"componentWillReceiveProps",value:function(e){this.state.firstLoad&&e.authorization&&(this.initializeBookmarks(e.authorization),this.setState({firstLoad:!1}))}},{key:"initializeBookmarks",value:function(e){var t=this;q(j.API_URL_BOOKMARK,{headers:{Authorization:"Bearer "+e.token}},e.password).then(function(e){t.setState({items:e.data,view:e.data}),t.state.isFiltered&&t.search()})}},{key:"render",value:function(){var e=this,t=this.state.view.map(function(t){return i.a.createElement("div",{key:t._id},i.a.createElement(_,{id:t._id,bookmark:t,editBookmark:e.editBookmark,deleteBookmark:e.deleteBookmark,searchByTag:e.searchByTag}),i.a.createElement("br",null))});return i.a.createElement("div",{className:"bookmarks"},i.a.createElement(A,{visible:this.state.isEditDialogOpen,toggleVisibility:this.toggleEditDialog},i.a.createElement("div",{className:"dialog-body"},i.a.createElement(ne,{label:"Title",data:this.state,id:"title",handleChange:function(t){return e.handleChange(t)}}),i.a.createElement(ne,{label:"URL",data:this.state,id:"href",handleChange:function(t){return e.handleChange(t)}}),i.a.createElement(ne,{label:"Tags",data:this.state,id:"tags",handleChange:function(t){return e.handleChange(t)}})),i.a.createElement("div",{className:"dialog-footer"},i.a.createElement(z,{action:this.toggleEditDialog,theme:"default",variant:"outline",align:"left"},i.a.createElement("i",{className:"material-icons"},"close"),"Cancel"),i.a.createElement(z,{action:this.addBookmark,theme:"primary",variant:"animate in",align:"right"},i.a.createElement("i",{className:"material-icons"},"double_arrow"),this.state.editDialogLabel))),i.a.createElement(x,null,i.a.createElement(L,{main:!0},t),i.a.createElement(L,{side:!0},i.a.createElement("div",{className:"filter-container"},i.a.createElement("div",{className:"section-main"},i.a.createElement(U,{label:"Add New",elements:this.state.sidebarElements.addNew,icon:"add",animate:!0}),i.a.createElement(U,{label:"Search",elements:this.state.sidebarElements.search,icon:"search",animate:!0,number:this.state.isFiltered?this.state.view.length:void 0},i.a.createElement("form",{method:"GET",onSubmit:this.search,noValidate:!0},i.a.createElement("div",{className:"space-top-2 space-left-4 space-right-4"},i.a.createElement(ne,{label:"Keywords",id:"searchtext",data:this.state,handleChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"typography-5 space-top-2 space-left-4"},i.a.createElement(R.a,{checked:this.state.searchPref.title,onChange:function(){return e.toggleSearchPref("title")},inputProps:{"aria-label":"primary checkbox"}}),"Include title"),i.a.createElement("div",{className:"typography-5 space-top-2 space-left-4"},i.a.createElement(R.a,{checked:this.state.searchPref.tags,onChange:function(){return e.toggleSearchPref("tags")},inputProps:{"aria-label":"primary checkbox"}}),"Include tags"),i.a.createElement("div",{className:"typography-5 space-top-2 space-left-4"},i.a.createElement(R.a,{checked:this.state.searchPref.href,onChange:function(){return e.toggleSearchPref("href")},inputProps:{"aria-label":"primary checkbox"}}),"Include URL"),this.state.isFiltered&&i.a.createElement("div",{className:"typography-4 space-top-2 space-left-2"},"Found ",this.state.view.length," bookmarks matching the search criteria"),i.a.createElement("div",{className:"actionbar-2 space-top-2 space-bottom-2"},i.a.createElement("div",null,i.a.createElement(z,{action:this.clearSearch,theme:"default"},"Clear")),i.a.createElement("div",null,i.a.createElement(z,{action:this.search,theme:"primary",variant:"animate in"},"Search")))))))))}}]),t}(n.Component),oe=a(76),re=a(152),le=a.n(re);a(318);var ce=function(e){var t=new le.a.Converter({tables:!0}).makeHtml(e.source);return i.a.createElement("div",{className:"markdown-body"},i.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}}))},ue=(a(319),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggle=function(){a.setState({show:!a.state.show})},a.changeSelection=function(e,t){e.target.name=a.props.id,e.target.value=t,a.props.handleChange(e),a.toggle()},a.getStyle=function(){var e=a.props.theme?a.props.theme:"";return e+=a.props.variant?" "+a.props.variant:"",e+=a.props.width?" "+a.props.width:""},a.state={show:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=[];return this.props.elements?t=this.props.elements.map(function(t){return i.a.createElement("div",{className:"option",key:t,onClick:function(a){return e.changeSelection(a,t)}},t)}):this.props.objects&&(t=this.props.objects.map(function(t){return i.a.createElement("div",{className:"option",key:t,onClick:function(a){return e.changeSelection(a,t.key)}},t.value)})),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"oak-select "+this.getStyle()},this.props.label&&i.a.createElement("label",null,this.props.label),i.a.createElement("div",{className:"select-button",onClick:function(){return e.toggle()}},this.props.elements&&i.a.createElement("div",null,this.props.data[this.props.id]),this.props.objects&&i.a.createElement("div",null,this.props.objects.find(function(t){return t.key===e.props.data[e.props.id]})&&this.props.objects.find(function(t){return t.key===e.props.data[e.props.id]}).value),i.a.createElement("div",null,i.a.createElement("i",{className:"material-icons"},"keyboard_arrow_down"))),i.a.createElement("div",{className:this.state.show?"dropdown show":"dropdown hide"},i.a.createElement("div",{className:"dropdown-content"},this.props.first&&i.a.createElement("div",{className:"option",onClick:function(t){return e.changeSelection(t,e.props.first)}},this.props.first),this.props.firstAction&&i.a.createElement("div",{className:"option",onClick:function(t){return e.changeSelection(t,e.props.firstAction)}},this.props.firstAction),t))))}}]),t}(i.a.Component)),me=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,a.delete=function(){a.props.deleteNote(a.props.id)},a.showEdit=function(){a.setState({editNote:!0,title:a.props.note.title,content:a.props.note.content,tags:a.props.note.tags,notebook:a.props.note.notebook,flag:a.props.note.flag})},a.hideEdit=function(){a.setState({editNote:!1})},a.save=function(){var e=a.state.notebook;"<create new>"===e&&(e=a.state.newNotebook),a.props.saveNote({id:a.props.id,title:a.state.title,content:a.state.content,tags:a.state.tags,flag:a.state.flag,notebook:e},!0)},a.togglepreview=function(){a.setState({preview:!a.state.preview})},a.handleChange=function(e){a.setState(Object(f.a)({},a.state,Object(P.a)({},e.target.name,e.target.value)))},a.state={editNote:!1,preview:!0,newNotebook:"",title:"",content:"",tags:"",notebook:"",flag:"",flags:[{key:"one",value:i.a.createElement("div",{className:"select-palette one"})},{key:"two",value:i.a.createElement("div",{className:"select-palette two"})},{key:"three",value:i.a.createElement("div",{className:"select-palette three"})},{key:"four",value:i.a.createElement("div",{className:"select-palette four"})},{key:"five",value:i.a.createElement("div",{className:"select-palette five"})},{key:"six",value:i.a.createElement("div",{className:"select-palette six"})}]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,O().subscribe(function(t){e._isMounted&&"closeNoteEditView"===t.name&&t.signal&&(e.hideEdit(),e.setState({newNotebook:""}))})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=[];return this.props.note.tags&&this.props.note.tags.split(" ").map(function(e){t.push(i.a.createElement("div",{key:e,className:"tag"},e))}),i.a.createElement(i.a.Fragment,null,!this.state.editNote&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"notebook"},i.a.createElement("i",{className:"material-icons"},"insert_drive_file"),this.props.note.notebook),i.a.createElement("div",{className:"typography-3 space-bottom-1"},this.props.note.title),t,i.a.createElement("div",{className:"space-bottom-2"}),i.a.createElement(z,{action:this.showEdit,theme:"secondary",variant:"animate in",align:"left"},i.a.createElement("i",{className:"material-icons"},"edit"),"Edit"),i.a.createElement(z,{action:this.delete,theme:"secondary",variant:"animate in",align:"right"},i.a.createElement("i",{className:"material-icons"},"delete"),"Delete"),i.a.createElement(ce,{source:this.props.note.content})),this.state.editNote&&i.a.createElement("div",null,i.a.createElement("div",{className:"typography-3 space-bottom-1"},this.state.title),i.a.createElement(z,{action:this.save,theme:"primary",variant:"animate in",align:"left"},i.a.createElement("i",{className:"material-icons"},"double_arrow"),"Save"),i.a.createElement(z,{action:this.showEdit,theme:"default",variant:"outline",align:"center"},i.a.createElement("i",{className:"material-icons"},"refresh"),"Undo All"),i.a.createElement(z,{action:this.hideEdit,theme:"default",variant:"outline",align:"center"},i.a.createElement("i",{className:"material-icons"},"close"),"Cancel"),!this.state.preview&&i.a.createElement(z,{action:this.togglepreview,theme:"default",variant:"outline",align:"right"},i.a.createElement("i",{className:"material-icons"},"visibility"),"Show Preview"),this.state.preview&&i.a.createElement(z,{action:this.togglepreview,theme:"default",variant:"outline",align:"right"},i.a.createElement("i",{className:"material-icons"},"visibility_off"),"Hide Preview"),i.a.createElement("div",null,i.a.createElement(ue,{width:"width-25",label:"Flag",data:this.state,id:"flag",handleChange:function(t){return e.handleChange(t)},objects:this.state.flags})),i.a.createElement("div",null,i.a.createElement(ue,{label:"Notebook",data:this.state,id:"notebook",handleChange:function(t){return e.handleChange(t)},elements:this.props.notebooks,firstAction:"<create new>"})),i.a.createElement("div",null,"<create new>"===this.state.notebook&&i.a.createElement(ne,{label:"Notebook name",data:this.state,id:"newNotebook",handleChange:function(t){return e.handleChange(t)}})),i.a.createElement(ne,{label:"Title",data:this.state,id:"title",handleChange:function(t){return e.handleChange(t)}}),i.a.createElement(ne,{label:"Tags (separated by blank spaces)",data:this.state,id:"tags",handleChange:function(t){return e.handleChange(t)}}),this.state.preview&&i.a.createElement("div",{className:"edit-note-view"},i.a.createElement("div",null,i.a.createElement(ne,{label:"Content (Markdown / HTML / Plaintext)",data:this.state,id:"content",multiline:!0,handleChange:function(t){return e.handleChange(t)}})),i.a.createElement("div",null,i.a.createElement("div",{className:"typography-5 space-bottom-1"},"Preview"),i.a.createElement(ce,{source:this.state.content}))),!this.state.preview&&i.a.createElement(ne,{label:"Content (Markdown / HTML / Plaintext)",data:this.state,id:"content",multiline:!0,handleChange:function(t){return e.handleChange(t)}}),i.a.createElement("div",{className:"space-top-2"})))}}]),t}(n.Component);a(147),a(320);var he=function(e){var t=i.a.createElement("i",{className:"material-icons"},e.icon);return i.a.createElement("div",{className:"action-button"},e.leftLabel&&e.rightLabel&&i.a.createElement("button",{className:"left "+e.type,onClick:e.leftAction},e.icon&&t,e.leftLabel),e.leftLabel&&e.rightLabel&&i.a.createElement("button",{className:"right "+e.type,onClick:e.rightAction},e.icon&&t,e.rightLabel),e.leftLabel&&!e.rightLabel&&i.a.createElement("button",{className:"center "+e.type,onClick:e.leftAction},e.icon&&t,e.leftLabel))},de=a(321),pe=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).selectNote=function(){a.props.selectNote(a.props.id)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=[];return this.props.note.tags&&this.props.note.tags.split(" ").map(function(t){e.push(i.a.createElement(he,{leftLabel:t}))}),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:this.props.selected?"noteref selected":"noteref",onClick:this.selectNote},i.a.createElement("div",{className:"content"},this.props.note.flag&&i.a.createElement("div",{className:"flag-palette "+this.props.note.flag}),this.props.showTag&&i.a.createElement("div",{className:"notebook"},this.props.note.notebook),i.a.createElement("div",{className:"title"},this.props.note.title),i.a.createElement("div",{className:"space-bottom-0"}),i.a.createElement("div",{className:"detail"},de(this.props.note.content.substring(0,100))))),i.a.createElement("div",{className:"separator"}))}}]),t}(n.Component),fe=a(68),ge=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e)))._isMounted=!1,a.sortTypes={created:"createdAt","last modified":"lastModifiedAt",notebook:"notebook","note name":"title"},a.sortOrders=["ascending","descending"],a.newNote=function(){a.toggleAddDialog(),w("sidebar",!1)},a.toggleAddDialog=function(){a.setState({isAddDialogOpen:!a.state.isAddDialogOpen}),a.resetForm()},a.resetForm=function(){a.setState({id:void 0,title:"",content:"",tags:"",existingNotebook:"",newNotebook:""})},a.closeAllDialog=function(){a.setState({isAddDialogOpen:!1}),a.resetForm()},a.toggleFilter=function(){a.setState({showFilter:!a.state.showFilter})},a.clearSearch=function(){a.setState({searchResults:a.state.items,isFiltered:!1,searchtext:""},function(){return w("noteListRefreshed",!0)}),w("sidebar",!1)},a.search=function(e){if(e&&e.preventDefault(),T(a.state.searchtext))a.setState({searchResults:a.state.items,isFiltered:!1},function(){return w("noteListRefreshed",!0)});else{var t=a.state.items.filter(function(e){return!(!a.state.searchPref.title||!I(e.title,a.state.searchtext))||(!(!a.state.searchPref.tags||!I(e.tags,a.state.searchtext))||(!(!a.state.searchPref.content||!I(e.content,a.state.searchtext))||void 0))}),n=void 0;t.length>0&&(n=t[0]._id);var i="all notebooks",s=[];t.map(function(e){s.push(e.notebook)}),1===Object(oe.a)(new Set(s)).length&&(i=s[0]),a.setState({searchResults:t,isFiltered:!0,selectedNoteId:n,notebookFilter:i},function(){return w("noteListRefreshed",!0)}),w("sidebar",!1)}},a.applyFilter=function(){var e,t,n,i=[],s=[];a.state.searchResults.map(function(e){(T(a.state.notebookFilter)||"all notebooks"===a.state.notebookFilter||e.notebook===a.state.notebookFilter)&&s.push(e),i.push(e.notebook)}),e=s,t=a.sortTypes[a.state.sortBy],n="descending"===a.state.sortOrder;var o="";(s=e.sort(function(e,a){return n?e[t]>a[t]?-1:e[t]<a[t]?1:0:e[t]<a[t]?-1:e[t]>a[t]?1:0}))&&s.length>0&&(o=s[0]._id),a.setState({selectedNoteId:o,view:s,filteredNotebookList:Object(oe.a)(new Set(i))})},a.toggleSearchPref=function(e){a.setState({searchPref:Object(f.a)({},a.state.searchPref,Object(P.a)({},e,!a.state.searchPref[e]))})},a.deleteNote=function(e){var t=Object(S.a)(a);J(j.API_URL_NOTE+"/"+e,{headers:{Authorization:"Bearer "+a.props.authorization.token}}).then(function(e){201===e.status&&(w("notification",!0,{type:"success",message:"Note deleted",duration:5e3}),t.setState({selectedNoteId:void 0},function(){return t.initializeNotes(t.props.authorization)}))}).catch(function(e){401===e.response.status&&t.props.logout(null,"failure","Session expired. Login again")})},a.selectNote=function(e){a.setState({selectedNoteId:e}),w("sidebar",!1)},a.saveNoteEvent=function(){var e=a.state.existingNotebook;"<create new>"===e&&(e=a.state.newNotebook),a.saveNote({id:null,type:"Note",title:a.state.title,content:a.state.content,tags:a.state.tags,flag:a.state.flag,notebook:e})},a.saveNote=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(S.a)(a);e?T(e.notebook)?w("notification",!0,{type:"failure",message:"Notebook not chosen",duration:5e3}):T(e.title)?w("notification",!0,{type:"failure",message:"Note name / title missing",duration:5e3}):(T(e.tags)&&(e.tags="unsorted"),$(j.API_URL_NOTE,{id:e.id,type:e.type,title:e.title,attributes:e.attributes,content:e.content,tags:e.tags,flag:e.flag,notebook:e.notebook},{headers:{Authorization:"Bearer "+a.props.authorization.token}},a.props.authorization.password,["attributes"]).then(function(e){201===e.status&&(t?(w("notification",!0,{type:"success",message:"Note edited",duration:5e3}),w("closeNoteEditView",!0)):(w("notification",!0,{type:"success",message:"Note created",duration:5e3}),n.closeAllDialog()),n.initializeNotes(n.props.authorization,e.data._id))}).catch(function(e){401===e.response.status&&n.props.logout(null,"failure","Session expired. Login again")})):w("notification",!0,{type:"failure",message:"Unknown error",duration:5e3})},a.handleChange=function(e){a.setState(Object(f.a)({},a.state,Object(P.a)({},e.target.name,e.target.value)))},a.handleNotebookFilterChange=function(e){a.setState(Object(f.a)({},a.state,Object(P.a)({},e.target.name,e.target.value)),function(){return a.applyFilter()})},a.state={items:[],searchResults:[],view:[],isAddDialogOpen:!1,selectedNoteId:"",title:"",content:"",tags:"",newNotebook:"",existingNotebook:"",existingNotebookList:[],filteredNotebookList:[],notebookFilter:"all notebooks",sortBy:"last modified",sortOrder:"descending",firstLoad:!0,flag:"",showFilter:!1,searchtext:"",isFiltered:!1,searchPref:{title:!0,tags:!0,content:!0},sidebarElements:{addNew:[{label:"New Note",action:a.newNote,icon:"note_add"}]}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this._isMounted=!0,this.props.location.search){var t=fe.parse(this.props.location.search);t&&t.q&&(t.q.startsWith("tags")&&this.setState({searchPref:{title:!1,tags:!0,content:!1}}),this.setState({searchtext:t.q,isFiltered:!0}))}this.state.firstLoad&&this.props.authorization.isAuth&&(this.initializeNotes(this.props.authorization),this.setState({firstLoad:!1})),O().subscribe(function(t){e._isMounted&&"noteListRefreshed"===t.name&&e.applyFilter()})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentWillReceiveProps",value:function(e){this.state.firstLoad&&e.authorization&&(this.initializeNotes(e.authorization),this.setState({firstLoad:!1}))}},{key:"initializeNotes",value:function(e,t){var a=this;q(j.API_URL_NOTE,{headers:{Authorization:"Bearer "+e.token}},e.password).then(function(e){a.setState({items:e.data,searchResults:e.data,view:e.data}),a.state.isFiltered?a.search():w("noteListRefreshed",!0);var n=[];e.data.map(function(e){return n.push(e.notebook)}),a.setState({existingNotebookList:Object(oe.a)(new Set(n))}),t?a.setState({selectedNoteId:t}):!a.state.selectedNoteId&&e.data&&e.data.length>0&&a.setState({selectedNoteId:e.data[0]._id})})}},{key:"render",value:function(){var e=this,t=this.state.view.map(function(t){return i.a.createElement("div",{key:t._id},t._id===e.state.selectedNoteId&&i.a.createElement(me,{key:t._id,id:t._id,note:t,saveNote:e.saveNote,deleteNote:e.deleteNote,notebooks:e.state.existingNotebookList}))}),a=this.state.view.map(function(t){return i.a.createElement("div",{key:t._id},i.a.createElement(pe,{selected:e.state.selectedNoteId===t._id,id:t._id,note:t,selectNote:e.selectNote,showTag:"all notebooks"===e.state.notebookFilter}))});return i.a.createElement("div",{className:"notes"},i.a.createElement(A,{visible:this.state.isAddDialogOpen,toggleVisibility:this.toggleAddDialog},i.a.createElement("div",{className:"dialog-body"},i.a.createElement("div",null,i.a.createElement(ue,{label:"Notebook",data:this.state,id:"existingNotebook",handleChange:function(t){return e.handleChange(t)},elements:this.state.existingNotebookList,firstAction:"<create new>"})),i.a.createElement("div",null,"<create new>"===this.state.existingNotebook&&i.a.createElement(ne,{label:"Notebook name",data:this.state,id:"newNotebook",handleChange:function(t){return e.handleChange(t)}})),i.a.createElement("div",null,i.a.createElement(ne,{label:"Title",data:this.state,id:"title",handleChange:function(t){return e.handleChange(t)}})),i.a.createElement("div",null,i.a.createElement(ne,{label:"Tags (separated by blank spaces)",data:this.state,id:"tags",handleChange:function(t){return e.handleChange(t)}})),i.a.createElement("div",null,i.a.createElement(ne,{label:"Content (Markdown / HTML / Plaintext)",data:this.state,id:"content",multiline:!0,handleChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"dialog-footer"},i.a.createElement(z,{action:this.toggleAddDialog,theme:"default",variant:"outline"},i.a.createElement("i",{className:"material-icons"},"close"),"Cancel"),i.a.createElement(z,{action:this.saveNoteEvent,theme:"primary",variant:"animate in"},i.a.createElement("i",{className:"material-icons"},"double_arrow"),"Save"))),i.a.createElement(x,{sideLabel:"More options"},i.a.createElement(L,{main:!0},t),i.a.createElement(L,{side:!0},i.a.createElement("div",{className:"filter-container"},i.a.createElement("div",{className:"section-main"},i.a.createElement(U,{label:"Add New",elements:this.state.sidebarElements.addNew,icon:"add",animate:!0}),i.a.createElement(U,{label:"Search",elements:this.state.sidebarElements.search,icon:"search",animate:!0,number:this.state.isFiltered?this.state.searchResults.length:void 0},i.a.createElement("div",{className:"space-top-1"}),i.a.createElement("form",{method:"GET",onSubmit:this.search,noValidate:!0},i.a.createElement("div",{className:"space-left-4 space-right-4"},i.a.createElement(ne,{label:"Keywords",id:"searchtext",data:this.state,handleChange:function(t){return e.handleChange(t)}}))),i.a.createElement("div",{className:"typography-5 space-top-2 space-left-4"},i.a.createElement(R.a,{checked:this.state.searchPref.title,onChange:function(){return e.toggleSearchPref("title")},inputProps:{"aria-label":"primary checkbox"}}),"Include title"),i.a.createElement("div",{className:"typography-5 space-top-2 space-left-4"},i.a.createElement(R.a,{checked:this.state.searchPref.tags,onChange:function(){return e.toggleSearchPref("tags")},inputProps:{"aria-label":"primary checkbox"}}),"Include tags"),i.a.createElement("div",{className:"typography-5 space-top-2 space-left-4"},i.a.createElement(R.a,{checked:this.state.searchPref.content,onChange:function(){return e.toggleSearchPref("content")},inputProps:{"aria-label":"primary checkbox"}}),"Include Content"),this.state.isFiltered&&i.a.createElement("div",{className:"typography-4 space-top-2"},"Found ",this.state.searchResults.length," notes matching the search criteria"),i.a.createElement("div",{className:"actionbar-2 space-top-2 space-bottom-2"},i.a.createElement("div",null,i.a.createElement(z,{action:this.clearSearch,theme:"default",variant:"animate none"},"Clear")),i.a.createElement("div",null,i.a.createElement(z,{action:this.search,theme:"default",variant:"animate in"},"Search")))),i.a.createElement(U,{label:this.state.isFiltered?"Search results":"All Notes",icon:"notes",number:this.state.view.length},i.a.createElement("div",{className:"filter-bar"},this.state.filteredNotebookList.length>1&&i.a.createElement("div",null,i.a.createElement(ue,{label:"Notebook",data:this.state,id:"notebookFilter",handleChange:function(t){return e.handleNotebookFilterChange(t)},elements:this.state.filteredNotebookList,first:"all notebooks"})),1===this.state.filteredNotebookList.length&&i.a.createElement("div",null,i.a.createElement(ue,{label:"Notebook",data:this.state,id:"notebookFilter",handleChange:function(t){return e.handleNotebookFilterChange(t)},elements:this.state.filteredNotebookList})),i.a.createElement("div",null),i.a.createElement("div",null,i.a.createElement(ue,{label:"Sort by",data:this.state,id:"sortBy",handleChange:function(t){return e.handleNotebookFilterChange(t)},elements:Object.keys(this.sortTypes)})),i.a.createElement("div",null,i.a.createElement(ue,{label:"Sort Order",data:this.state,id:"sortOrder",handleChange:function(t){return e.handleNotebookFilterChange(t)},elements:this.sortOrders}))),a))))))}}]),t}(n.Component),ve=a(154),Ee=function(){return function(e){e({type:"GET_AUTH"})}},be=function(e){return function(t){t({type:"ADD_AUTH",payload:e})}},ke=function(){return function(e){e({type:"REMOVE_AUTH"})}};a(148);function ye(e){return q(j.API_URL_PRESIGNIN+e,null).then(function(e){return Promise.resolve(e)}).catch(function(e){return Promise.resolve(e.response)})}function Ne(e,t){try{var a=(n=e.password,i=JSON.stringify(t),B.a.decrypt(n,i));return Y(j.API_URL_SIGNIN,{email:e.email,solution:a},null).then(function(e){return Promise.resolve(e)})}catch(s){return"ccm: tag doesn't match"===s.message?Promise.resolve({status:401}):Promise.resolve(s)}var n,i}function we(e,t,a){var n={cipher:"aes",iter:"12000",ks:256,salt:W.a.enc.Base64.stringify(W.a.enc.Utf8.parse(a))};return B.a.encrypt(e,t,n)}var Oe=a(68),Ce=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).signin=function(e){e.preventDefault(),w("notification",!1),w("spinner"),a.state.email&&a.state.password?ye(a.state.email).then(function(e){200===e.status?Ne({email:a.state.email,password:a.state.password},e.data).then(function(e){200===e.status?(w("notification",!0,{message:"Signed In successfully",type:"success",duration:3e3}),a.success(e.data,a.state.password)):401===e.status?w("notification",!0,{message:"Incorrect passphrase",type:"failure",duration:3e3}):w("notification",!0,{message:"Unknown response from server. Please try again or at a later time",type:"failure",duration:3e3})}).catch(function(e){w("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})}):404===e.status&&w("notification",!0,{message:"User name does not exist",type:"failure",duration:3e3})}):w("notification",!0,{type:"failure",message:"Username/password cannot be empty",duration:3e3})},a.signup=function(e){e.preventDefault();var t=Object(S.a)(a);if(w("notification",!1),w("spinner"),a.state.name&&a.state.password&&a.state.email){if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(a.state.email))return void w("notification",!0,{type:"failure",message:"Email ID is invalid",duration:3e3});q(j.API_URL_PRESIGNUP,null).then(function(e){return Promise.resolve(e)}).then(function(e){var a;200===e.status&&(a={name:t.state.name,password:t.state.password,email:t.state.email,solution:e.data.solution,salt:e.data.salt},Y(j.API_URL_SIGNUP,{name:a.name,email:a.email,problem:we(a.password,a.solution,a.salt),solution:a.solution},null).then(function(e){return Promise.resolve(e.status)})).then(function(e){200===e&&(w("notification",!0,{type:"success",message:"Your account has been created. You can login now",duration:3e3}),t.toggle())})})}else a.state.name?a.state.email?a.state.password||w("notification",!0,{type:"failure",message:"Password cannot be empty",duration:3e3}):w("notification",!0,{type:"failure",message:"Email cannot be empty",duration:3e3}):w("notification",!0,{type:"failure",message:"Name cannot be empty",duration:3e3})},a.sentEmailWithCode=function(){T(a.state.email)?w("notification",!0,{message:"Email cannot be empty",type:"failure",duration:5e3}):a.sentPasswordChangeEmail("password")},a.sentPasswordChangeEmail=function(e){var t,n=1+99*Math.random();(t={email:a.state.email,resetCode:n},Y(j.API_URL_CODE,t,null).then(function(e){return Promise.resolve(e.status)})).then(function(t){200===t?"password"===e&&w("notification",!0,{message:"Password sent successfully",type:"success",duration:3e3}):w("notification",!0,{type:"failure",message:"Invalid Email error",duration:3e3})}).catch(function(e){w("notification",!0,{type:"failure",message:"Bad request",duration:3e3})})},a.handleChange=function(e){a.setState(Object(f.a)({},a.state,Object(P.a)({},e.currentTarget.name,e.currentTarget.value)))},a.success=function(e,t){a.props.addAuth({isAuth:!0,token:e.token,secret:e.secret,name:e.name,email:e.email,password:t}),w("loggedin",!0),a.props.history.push("/home")},a.toggle=function(){a.setState({newuser:!a.state.newuser})},a.state={newuser:!1,name:"",email:"",password:"",resetCode:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){if(this.props.location.search){var e=Oe.parse(this.props.location.search);e&&"signup"===e.type&&this.setState({newuser:!0})}}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"login"},!this.state.newuser&&i.a.createElement("div",{className:"container"},i.a.createElement("form",{method:"GET",onSubmit:this.signin,noValidate:!0},i.a.createElement("h1",null,"Log In"),i.a.createElement("div",{className:"form"},i.a.createElement(ne,{label:"Username/e-mail",id:"email",data:this.state,handleChange:function(t){return e.handleChange(t)}}),i.a.createElement(ne,{label:"Password",id:"password",type:"password",data:this.state,handleChange:function(t){return e.handleChange(t)}})),i.a.createElement("br",null),i.a.createElement(z,{theme:"primary",variant:"animate in",action:this.signin},"Sign In"),i.a.createElement("br",null),i.a.createElement("br",null),"Don't have an account? \xa0 ",i.a.createElement(z,{theme:"secondary",variant:"outline",action:this.toggle},"Sign Up"),i.a.createElement("br",null),i.a.createElement("br",null)),i.a.createElement(z,{action:this.sentEmailWithCode},"Forgot password ?")),this.state.newuser&&i.a.createElement("div",{className:"container"},i.a.createElement("form",{method:"GET",onSubmit:this.signup,noValidate:!0},i.a.createElement("h1",null,"Sign Up"),i.a.createElement("div",{className:"form"},i.a.createElement(ne,{label:"Name",id:"name",data:this.state,handleChange:function(t){return e.handleChange(t)}}),i.a.createElement(ne,{label:"Email / User Name",id:"email",data:this.state,handleChange:function(t){return e.handleChange(t)}}),i.a.createElement(ne,{label:"Password",id:"password",type:"password",data:this.state,handleChange:function(t){return e.handleChange(t)}})),i.a.createElement("br",null),i.a.createElement(z,{theme:"primary",variant:"animate in",action:this.signup},"Create account"),i.a.createElement("br",null),i.a.createElement("br",null),"Already have a account? \xa0 ",i.a.createElement(z,{theme:"secondary",variant:"outline",action:this.toggle},"Sign In"))))}}]),t}(n.Component),Pe=Object(h.b)(function(e){return{authorization:e.authorization}},{getAuth:Ee,addAuth:be,removeAuth:ke})(Ce),Se=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.props.getAuth()}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.props.authorization.isAuth&&i.a.createElement(y.Route,{path:this.props.path,render:this.props.render}))}}]),t}(n.Component),_e=Object(h.b)(function(e){return{authorization:e.authorization}},{getAuth:Ee})(Se),je=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.props.authorization.isAuth||console.log(this.props),this.props.getAuth()}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null)}}]),t}(n.Component),Ae=Object(h.b)(function(e){return{authorization:e.authorization}},{getAuth:Ee,addAuth:be,removeAuth:ke})(je),ze=function(){return function(e){e({type:"GET_PROFILE"})}},xe=function(e){return function(t){t({type:"SET_PROFILE",payload:e})}},Le=a(155),Re=a(342),Te=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={backdrop:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;O().subscribe(function(t){"dialog"===t.name&&(t.signal?e.setState({backdrop:"backdrop-fade"}):e.setState({backdrop:""}))})}},{key:"render",value:function(){return i.a.createElement("div",{className:this.state.backdrop})}}]),t}(n.Component),Ie=(a(323),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={spinner:!1,notification:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this;O().subscribe(function(t){"notification"===t.name&&(t.signal?(e.setState({notification:t.data,spinner:!1}),t.data&&t.data.duration&&setTimeout(function(){w("notification",!1)},t.data.duration)):e.setState({notification:null})),"spinner"===t.name&&e.setState({spinner:t.signal})})}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.state.notification&&i.a.createElement("div",{className:"notification "+this.state.notification.type},i.a.createElement("div",{className:"message"},this.state.notification.message)),this.state.spinner&&i.a.createElement("div",{className:"lds-roller"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null)))}}]),t}(n.Component)),Ue=(a(69),a(73)),Fe=a.n(Ue),De=a(74),Me=a.n(De),Be=a(45),Ve=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).toggleMenu=function(){a.setState({menu:!a.state.menu})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"links"},this.props.authorization.isAuth&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Be.a,{to:"/bookmarks",className:"navitem",activeClassName:"active"},"Bookmarks"),i.a.createElement(Be.a,{to:"/notes",className:"navitem",activeClassName:"active"},"Notes"),i.a.createElement(Be.a,{to:"/settings",className:"navitem",activeClassName:"active"},"Settings"),i.a.createElement(Be.a,{to:"/help",className:"navitem",activeClassName:"active"},"Help")))}}]),t}(n.Component),We=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).signin=function(e){a.props.login(e)},a.props.getProfile(),a.state={showSettings:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:this.props.transparent?"navbar desktop transparent":"navbar desktop"},i.a.createElement("div",{className:"left"},!this.props.transparent&&"theme_light"===this.props.profile.theme&&i.a.createElement("img",{className:"logo",src:Me.a,alt:"Protekt logo"}),(this.props.transparent||"theme_dark"===this.props.profile.theme)&&i.a.createElement("img",{className:"logo",src:Fe.a,alt:"Protekt logo"}),i.a.createElement(Ve,{authorization:this.props.authorization,profile:this.props.profile})),i.a.createElement("div",{className:"right"},i.a.createElement("div",{className:"action"},this.props.authorization.isAuth&&i.a.createElement(z,{theme:"default",variant:"outline",small:!0,action:this.props.toggleSettings},i.a.createElement("i",{className:"material-icons"},"brush"),"Appearance"),this.props.authorization.isAuth&&i.a.createElement(z,{theme:"default",variant:"outline",small:!0,action:this.props.logout()},i.a.createElement("i",{className:"material-icons"},"power_settings_new"),"Logout"),!this.props.authorization.isAuth&&i.a.createElement(z,{theme:"default",variant:"outline",small:!0,action:function(){return e.signin("signin")}},i.a.createElement("i",{className:"material-icons"},"person"),"Login"),!this.props.authorization.isAuth&&i.a.createElement(z,{theme:"default",variant:"outline",small:!0,action:function(){return e.signin("signup")}},i.a.createElement("i",{className:"material-icons"},"person_add"),"Signup"))))}}]),t}(n.Component),Ge=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggleMenu=function(){a.setState({menu:!a.state.menu})},a.signin=function(e){a.props.login(e)},a.props.getProfile(),a.state={menu:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:this.props.transparent?"navbar mobile transparent":"navbar mobile"},i.a.createElement("div",{className:"left"},!this.props.transparent&&"theme_light"===this.props.profile.theme&&i.a.createElement("img",{className:"logo",src:Me.a,alt:"Protekt logo"}),(this.props.transparent||"theme_dark"===this.props.profile.theme)&&i.a.createElement("img",{className:"logo",src:Fe.a,alt:"Protekt logo"})),i.a.createElement("div",{className:"right"},i.a.createElement("div",{className:this.state.menu?"menu active":"menu",onClick:this.toggleMenu},i.a.createElement("div",null)))),i.a.createElement("div",{className:this.state.menu?"slider show":"slider hide",onClick:this.toggleMenu},i.a.createElement("div",{className:this.state.menu?"container":"container hidetext",onClick:this.toggleMenu},i.a.createElement("div",{className:"action"},i.a.createElement("div",{className:"settings-icon",onClick:this.props.toggleSettings},this.props.authorization.isAuth&&i.a.createElement(z,{theme:"default",variant:"outline",small:!0,action:this.props.toggleSettings},i.a.createElement("i",{className:"material-icons"},"brush"),"Appearance")),i.a.createElement("div",{className:"buttons"},this.props.authorization.isAuth&&i.a.createElement(z,{theme:"default",variant:"outline",small:!0,action:this.props.logout()},i.a.createElement("i",{className:"material-icons"},"power_settings_new"),"Logout"),!this.props.authorization.isAuth&&i.a.createElement(z,{theme:"secondary",variant:"animate none",small:!0,action:function(){return e.signin("signin")}},i.a.createElement("i",{className:"material-icons"},"person"),"Login"),!this.props.authorization.isAuth&&i.a.createElement(z,{theme:"secondary",variant:"animate none",small:!0,action:function(){return e.signin("signup")}},i.a.createElement("i",{className:"material-icons"},"person_add"),"Signup"))),i.a.createElement(Ve,{authorization:this.props.authorization,profile:this.props.profile}))))}}]),t}(n.Component),He=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).toggleDarkMode=function(){"theme_dark"===a.props.profile.theme?a.props.setProfile(Object(f.a)({},a.props.profile,{theme:"theme_light"})):a.props.setProfile(Object(f.a)({},a.props.profile,{theme:"theme_dark"}))},a.changeTextSize=function(e){a.props.setProfile(Object(f.a)({},a.props.profile,{textSize:e}))},a.changeThemeColor=function(e){a.props.setProfile(Object(f.a)({},a.props.profile,{themeColor:e}))},a.login=function(e){a.props.history.push("/login?type="+e)},a.toggleSettings=function(){a.setState({showSettings:!a.state.showSettings})},a.props.getProfile(),a.state={visible:!1,mobilemenu:"hide",chooseTheme:!1,showSettings:!1,transparentNavBar:!1,firstLoad:!0},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;O().subscribe(function(t){"navbar-transparency"===t.name&&e.setState({transparentNavBar:t.signal}),"loggedin"===t.name&&(e.props.reloadProfile(e.props.authorization),e.setState({firstLoad:!1})),"loggedout"===t.name&&e.props.history.push("/home")})}},{key:"componentWillReceiveProps",value:function(e){this.state.firstLoad&&e.authorization&&e.authorization.isAuth&&(this.props.reloadProfile(e.authorization),this.setState({firstLoad:!1}))}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"nav"},i.a.createElement(We,Object.assign({},this.props,{logout:this.props.logout,login:this.login,toggleSettings:this.toggleSettings,transparent:this.state.transparentNavBar})),i.a.createElement(Ge,Object.assign({},this.props,{logout:this.props.logout,login:this.login,toggleSettings:this.toggleSettings,transparent:this.state.transparentNavBar})),i.a.createElement(A,{visible:this.state.showSettings,toggleVisibility:this.toggleSettings},i.a.createElement("div",{className:"dialog-body"},i.a.createElement("div",{className:"settings"},i.a.createElement("div",null,"Dark mode"),i.a.createElement("div",null,i.a.createElement(R.a,{checked:"theme_dark"===this.props.profile.theme,onChange:this.toggleDarkMode,inputProps:{"aria-label":"primary checkbox"}})),i.a.createElement("div",null,"Text Size"),i.a.createElement("div",null,i.a.createElement("div",{className:"text-size size-1 space-right-1 "+("textsize_tiny"===this.props.profile.textSize?"active":""),onClick:function(){return e.changeTextSize("textsize_tiny")}},"Az"),i.a.createElement("div",{className:"text-size size-2 space-right-1 "+("textsize_small"===this.props.profile.textSize?"active":""),onClick:function(){return e.changeTextSize("textsize_small")}},"Az"),i.a.createElement("div",{className:"text-size size-3 space-right-1 "+("textsize_medium"===this.props.profile.textSize?"active":""),onClick:function(){return e.changeTextSize("textsize_medium")}},"Az"),i.a.createElement("div",{className:"text-size size-4 "+("textsize_large"===this.props.profile.textSize?"active":""),onClick:function(){return e.changeTextSize("textsize_large")}},"Az")),i.a.createElement("div",{className:"typography-5"},"Color Scheme"),i.a.createElement("div",null,i.a.createElement("div",{className:"theme-color color-1",onClick:function(){return e.changeThemeColor("themecolor_1")}},i.a.createElement("i",{className:"material-icons"},"themecolor_1"===this.props.profile.themeColor&&"check")),i.a.createElement("div",{className:"theme-color color-2",onClick:function(){return e.changeThemeColor("themecolor_2")}},i.a.createElement("i",{className:"material-icons"},"themecolor_2"===this.props.profile.themeColor&&"check")),i.a.createElement("div",{className:"theme-color color-3",onClick:function(){return e.changeThemeColor("themecolor_3")}},i.a.createElement("i",{className:"material-icons"},"themecolor_3"===this.props.profile.themeColor&&"check")),i.a.createElement("div",{className:"theme-color color-4",onClick:function(){return e.changeThemeColor("themecolor_4")}},i.a.createElement("i",{className:"material-icons"},"themecolor_4"===this.props.profile.themeColor&&"check"))))),i.a.createElement("div",{className:"dialog-footer"},i.a.createElement(z,{theme:"primary",variant:"animate none",action:this.toggleSettings},"Close"))))}}]),t}(n.Component),Ke=Object(h.b)(function(e){return{profile:e.profile}},{getProfile:ze,setProfile:xe,reloadProfile:function(e){return function(t){q(j.API_URL_PREFERENCES,{headers:{Authorization:"Bearer "+e.token}},e.password).then(function(e){console.log(e),t({type:"SET_PROFILE",payload:e.data})})}}})(Object(y.withRouter)(He));a(324);var qe=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(f.a)({},a.state,Object(P.a)({},e.currentTarget.name,e.currentTarget.value)))},a.toggleDarkMode=function(){"theme_dark"===a.props.profile.theme?a.props.persistProfile(a.props.authorization,Object(f.a)({},a.props.profile,{theme:"theme_light"})):a.props.persistProfile(a.props.authorization,Object(f.a)({},a.props.profile,{theme:"theme_dark"}))},a.changeTextSize=function(e){a.props.persistProfile(a.props.authorization,Object(f.a)({},a.props.profile,{textSize:e}))},a.changeThemeColor=function(e){a.props.persistProfile(a.props.authorization,Object(f.a)({},a.props.profile,{themeColor:e}))},a.changePassword=function(){T(a.state.oldPassword)?w("notification",!0,{message:"Old password not provided",type:"failure",duration:5e3}):T(a.state.newPassword)||T(a.state.repeatPassword)?w("notification",!0,{message:"New password not provided",type:"failure",duration:5e3}):a.state.newPassword===a.state.repeatPassword?a.checkOldPassword("oldpassword"):w("notification",!0,{message:"New password not provided",type:"failure",duration:5e3})},a.checkOldPassword=function(e){ye(a.state.email).then(function(e){200===e.status&&Ne({email:a.state.email,password:a.state.oldPassword},e.data).then(function(e){200===e.status?a.updateUserDetailsImpl("password"):401===e.status?w("notification",!0,{message:"Incorrect passphrase",type:"failure",duration:3e3}):w("notification",!0,{message:"Unknown response from server. Please try again or at a later time",type:"failure",duration:3e3})}).catch(function(e){w("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})})})},a.updateUserDetails=function(){T(a.state.name)?w("notification",!0,{message:"Name not provided",type:"failure",duration:5e3}):T(a.state.email)?w("notification",!0,{message:"Email not provided",type:"failure",duration:5e3}):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(a.state.email)?a.updateUserDetailsImpl("user"):w("notification",!0,{type:"failure",message:"Email ID is invalid",duration:3e3})},a.updateUserDetailsImpl=function(e){(function(e,t,a){return q(j.API_URL_PRESIGNUP,null).then(function(n){if(200===n.status){var i={};return i=a&&"password"===a?{problem:we(e.password,n.data.solution,n.data.salt),solution:n.data.solution}:{name:e.name,email:e.email},$(j.API_URL_USER_DETAILS,i,{headers:{Authorization:"Bearer "+t.token}},t.password).then(function(e){return Promise.resolve(e)})}})})({name:a.state.name,email:a.state.email,password:a.state.newPassword},a.props.authorization,e).then(function(t){201===t.status?w("notification",!0,"password"===e?{message:"Password updated successfully",type:"success",duration:3e3}:{message:"User account updated successfully",type:"success",duration:3e3}):w("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})}).catch(function(e){w("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})})},a.fileChoosen=function(e){e.preventDefault();var t=Object(S.a)(a),n=new FileReader;w("spinner"),n.onload=function(e){var a,n;(a={content:e.target.result},n=t.props.authorization.token,console.log(a),Y(j.API_URL_BOOKMARK_IMPORT,a,{headers:{Authorization:"Bearer "+n}}).then(function(e){return Promise.resolve(e)})).then(function(e){w("notification",!0,{message:"Imported ("+e.data.length+") bookmarks successfully",type:"success",duration:6e3})})},n.readAsText(e.target.files[0]),e.target.value=""},a.exportBookmark=function(){var e=Object(S.a)(a);q(j.API_URL_BOOKMARK,{headers:{Authorization:"Bearer "+e.props.authorization.token}},e.props.authorization.password).then(function(t){var a='<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8"><TITLE>Bookmarks</TITLE><H1>Bookmarks</H1>';e.setState({data:t.data}),e.state.data.map(function(e,t){var n='<DL><p><DT><A HREF="'+e.href+'">'+e.title+"</A></DL><p>";a+=n}),console.log(a),e.sendExportEmail(a)})},a.sendExportEmail=function(e){var t,n;(t={email:a.state.email,content:e},n={headers:{Authorization:"Bearer "+a.props.authorization.token}},Y(j.API_URL_MAIL,t,{headers:{Authorization:"Bearer "+n}}).then(function(e){return Promise.resolve(e.status)})).then(function(e){200===e&&w("notification",!0,{message:"Check your mail for bookmark attachment",type:"success",duration:3e3})}).catch(function(e){w("notification",!0,{type:"failure",message:"Bad request",duration:3e3})})},a.state={name:"",email:"",oldPassword:"",newPassword:"",repeatPassword:"",data:[]},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setState({})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"settings"},i.a.createElement(x,{sideLabel:"More options"},i.a.createElement(L,{main:!0},i.a.createElement("div",{className:"typography-3"},"Import Bookmarks"),i.a.createElement("div",{className:"space-top-2"},i.a.createElement("label",{className:"file-upload"},i.a.createElement("input",{type:"file",name:"file",onChange:this.fileChoosen}),"Import")),i.a.createElement("div",{className:"typography-3 space-top-4"},"Export Bookmarks"),i.a.createElement("div",{className:"space-top-2 space-left-2"},i.a.createElement(z,{theme:"secondary",variant:"animate in",action:this.exportBookmark},"Export")),i.a.createElement("div",{className:"typography-3 space-top-4"},"Appearance"),i.a.createElement("div",{className:"appearance"},i.a.createElement("div",{className:"typography-5"},"Dark mode"),i.a.createElement("div",null,i.a.createElement(R.a,{checked:"theme_dark"===this.props.profile.theme,onChange:this.toggleDarkMode,inputProps:{"aria-label":"primary checkbox"}})),i.a.createElement("div",{className:"typography-5 space-bottom-2"},"Text Size"),i.a.createElement("div",{className:" space-bottom-2"},i.a.createElement("div",{className:"text-size size-1 space-right-1 "+("textsize_tiny"===this.props.profile.textSize?"active":""),onClick:function(){return e.changeTextSize("textsize_tiny")}},"Az"),i.a.createElement("div",{className:"text-size size-2 space-right-1 "+("textsize_small"===this.props.profile.textSize?"active":""),onClick:function(){return e.changeTextSize("textsize_small")}},"Az"),i.a.createElement("div",{className:"text-size size-3 space-right-1 "+("textsize_medium"===this.props.profile.textSize?"active":""),onClick:function(){return e.changeTextSize("textsize_medium")}},"Az"),i.a.createElement("div",{className:"text-size size-4 "+("textsize_large"===this.props.profile.textSize?"active":""),onClick:function(){return e.changeTextSize("textsize_large")}},"Az")),i.a.createElement("div",{className:"typography-5"},"Color Scheme"),i.a.createElement("div",null,i.a.createElement("div",{className:"theme-color color-1",onClick:function(){return e.changeThemeColor("themecolor_1")}},i.a.createElement("i",{className:"material-icons"},"themecolor_1"===this.props.profile.themeColor&&"check")),i.a.createElement("div",{className:"theme-color color-2",onClick:function(){return e.changeThemeColor("themecolor_2")}},i.a.createElement("i",{className:"material-icons"},"themecolor_2"===this.props.profile.themeColor&&"check")),i.a.createElement("div",{className:"theme-color color-3",onClick:function(){return e.changeThemeColor("themecolor_3")}},i.a.createElement("i",{className:"material-icons"},"themecolor_3"===this.props.profile.themeColor&&"check")),i.a.createElement("div",{className:"theme-color color-4",onClick:function(){return e.changeThemeColor("themecolor_4")}},i.a.createElement("i",{className:"material-icons"},"themecolor_4"===this.props.profile.themeColor&&"check")),i.a.createElement("div",{className:"theme-color color-5",onClick:function(){return e.changeThemeColor("themecolor_5")}},i.a.createElement("i",{className:"material-icons"},"themecolor_5"===this.props.profile.themeColor&&"check")),i.a.createElement("div",{className:"theme-color color-6",onClick:function(){return e.changeThemeColor("themecolor_6")}},i.a.createElement("i",{className:"material-icons"},"themecolor_6"===this.props.profile.themeColor&&"check")))),i.a.createElement("div",{className:"typography-3 space-top-4"},"User Account"),i.a.createElement("div",null,i.a.createElement(ne,{label:"Name",data:this.state,id:"name",handleChange:function(t){return e.handleChange(t)}})),i.a.createElement("div",null,i.a.createElement(ne,{label:"Email",data:this.state,id:"email",handleChange:function(t){return e.handleChange(t)}})),i.a.createElement("div",{className:"space-top-1"},i.a.createElement(z,{theme:"secondary",variant:"animate in",action:this.updateUserDetails},"Update details")),i.a.createElement("div",{className:"typography-3 space-top-4"},"Password"),i.a.createElement("div",null,i.a.createElement(ne,{type:"password",label:"Old Password",data:this.state,id:"oldPassword",handleChange:function(t){return e.handleChange(t)}})),i.a.createElement("div",null,i.a.createElement(ne,{type:"password",label:"New Password",data:this.state,id:"newPassword",handleChange:function(t){return e.handleChange(t)}})),i.a.createElement("div",null,i.a.createElement(ne,{type:"password",label:"Repeat New Password",data:this.state,id:"repeatPassword",handleChange:function(t){return e.handleChange(t)}})),i.a.createElement("div",{className:"space-top-1"},i.a.createElement(z,{theme:"secondary",variant:"animate in",action:this.changePassword},"Change Password")))))}}]),t}(i.a.Component),Ye=Object(h.b)(function(e){return{profile:e.profile}},{getProfile:ze,setProfile:xe,persistProfile:function(e,t){return function(a){$(j.API_URL_PREFERENCES,t,{headers:{Authorization:"Bearer "+e.token}},e.password).then(function(e){a({type:"SET_PROFILE",payload:e.data})})}}})(qe),$e=a(68),Je=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(f.a)({},a.state,Object(P.a)({},e.currentTarget.name,e.currentTarget.value)))},a.changePassword=function(){T(a.state.password)?w("notification",!0,{message:"password not provided",type:"failure",duration:5e3}):T(a.state.repeatPassword)||T(a.state.repeatPassword)?w("notification",!0,{message:"Repeat password not provided",type:"failure",duration:5e3}):a.state.password===a.state.repeatPassword?a.resetPassword("password"):w("notification",!0,{message:"Password is not matching",type:"failure",duration:5e3})},a.resetPassword=function(e){(function(e,t){return q(j.API_URL_PRESIGNUP,null).then(function(a){if(200===a.status){var n={};return t&&"password"===t&&(n={problem:we(e.password,a.data.solution,a.data.salt),solution:a.data.solution,resetCode:e.resetCode}),Y(j.API_URL_RESET,n,null).then(function(e){return Promise.resolve(e.status)})}})})({password:a.state.password,resetCode:a.state.resetCode},e).then(function(t){200===t?"password"===e&&w("notification",!0,{message:"Password Changed successfully",type:"success",duration:3e3}):w("notification",!0,{type:"failure",message:"Invalid request",duration:3e3})}).catch(function(e){w("notification",!0,{type:"failure",message:"Bad request",duration:3e3})})},a.state={password:"",repeatPassword:"",resetCode:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){if(this.props.location.search){var e=$e.parse(this.props.location.search);e.code?this.setState({resetCode:e.code}):this.props.history.push("/home")}}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"login"},i.a.createElement("div",{className:"container"},i.a.createElement("form",{method:"GET",onSubmit:this.changePassword,noValidate:!0},i.a.createElement("h1",null,"Reset password"),i.a.createElement("div",{className:"form"},i.a.createElement(ne,{label:"Password",id:"password",type:"password",data:this.state,handleChange:function(t){return e.handleChange(t)}}),i.a.createElement(ne,{label:"Repeat Password",id:"repeatPassword",type:"password",data:this.state,handleChange:function(t){return e.handleChange(t)}})),i.a.createElement("br",null),i.a.createElement(z,{theme:"primary",variant:"block",action:this.changePassword},"Submit"))))}}]),t}(n.Component),Qe=Object(h.b)(function(e){return{authorization:e.authorization}},{getAuth:Ee,addAuth:be,removeAuth:ke})(Je),Xe={themecolor_1:Ze("#C4005B"),themecolor_2:Ze("#803BC2"),themecolor_3:Ze("#E74443"),themecolor_4:Ze("#29BE3B"),themecolor_5:Ze("#ffe20f"),themecolor_6:Ze("#4d4dff")};function Ze(e){return Object(Le.a)({palette:{primary:{main:e},secondary:{main:e}}})}var et=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).logout=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"You have been logged out";a.props.removeAuth(),w("notification",!0,{type:t,message:n,duration:3e3}),w("loggedout",!0)},a.props.getProfile(),a.props.getAuth(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App "+this.props.profile.theme+" "+this.props.profile.textSize+" "+this.props.profile.themeColor},i.a.createElement(ve.HashRouter,null,i.a.createElement(Ae,this.props),i.a.createElement(Te,null),i.a.createElement("div",{className:"body"},i.a.createElement("div",{className:"body-content"},i.a.createElement(Ie,null),i.a.createElement(Re.a,{theme:Xe[this.props.profile.themeColor]},i.a.createElement(Ke,Object.assign({},this.props,{logout:function(){return e.logout}})),i.a.createElement(y.Route,{exact:!0,path:"/",render:function(t){return i.a.createElement(C,Object.assign({},t,e.props,{logout:function(){return e.logout}}))}}),i.a.createElement(y.Route,{path:"/home",render:function(t){return i.a.createElement(C,Object.assign({},t,e.props,{logout:function(){return e.logout}}))}}),i.a.createElement(y.Route,{path:"/login",render:function(t){return i.a.createElement(Pe,Object.assign({},t,e.props,{logout:function(){return e.logout}}))}}),i.a.createElement(y.Route,{path:"/reset",render:function(t){return i.a.createElement(Qe,Object.assign({},t,e.props,{logout:function(){return e.logout}}))}}),i.a.createElement(_e,{path:"/bookmarks",render:function(t){return i.a.createElement(se,Object.assign({},t,e.props,{logout:e.logout}))}}),i.a.createElement(_e,{path:"/notes",render:function(t){return i.a.createElement(ge,Object.assign({},t,e.props,{logout:function(){return e.logout}}))}}),i.a.createElement(_e,{path:"/settings",render:function(t){return i.a.createElement(Ye,Object.assign({},t,e.props,{logout:function(){return e.logout}}))}}))))))}}]),t}(n.Component),tt=Object(h.b)(function(e){return{authorization:e.authorization,profile:e.profile}},{getAuth:Ee,addAuth:be,removeAuth:ke,getProfile:ze})(et),at=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement(h.a,{store:k},i.a.createElement(tt,this.props))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(at,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},69:function(e,t,a){},73:function(e,t,a){e.exports=a.p+"static/media/protekt_white.0157e466.svg"},74:function(e,t,a){e.exports=a.p+"static/media/protekt_black.f386b1d6.svg"}},[[157,1,2]]]);
//# sourceMappingURL=main.7a7bf923.chunk.js.map