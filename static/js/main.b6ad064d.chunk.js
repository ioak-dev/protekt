(this.webpackJsonpprotekt=this.webpackJsonpprotekt||[]).push([[0],{141:function(e,t,a){},142:function(e,t,a){},152:function(e,t,a){e.exports=a(307)},157:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){},184:function(e,t){},186:function(e,t){},219:function(e,t){},220:function(e,t){},285:function(e,t,a){},286:function(e,t,a){},287:function(e,t,a){},288:function(e,t,a){},289:function(e,t,a){},290:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){},306:function(e,t,a){},307:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(29),i=a.n(o),c=(a(157),a(10)),l=a(31),s=a(144),u=a(2),m={isAuth:!1,token:"",secret:"",name:"",email:"",password:""},d={theme:"theme_dark",textSize:"textsize_medium",themeColor:"themecolor_6"},f={items:[]},h={items:[]},p=Object(l.c)({authorization:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_AUTH":return console.log("GET_AUTH reducer"),Object(u.a)({},e);case"ADD_AUTH":return console.log("ADD_AUTH reducer"),Object(u.a)({},e,{},t.payload);case"REMOVE_AUTH":return console.log("REMOVE_AUTH reducer"),Object(u.a)({},e,{isAuth:!1,token:"",secret:"",name:"",password:""});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROFILE":return console.log("GET_PROFILE reducer"),Object(u.a)({},e);case"SET_PROFILE":return console.log("SET_PROFILE reducer"),Object(u.a)({},e,{},t.payload);default:return e}},bookmark:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_BOOKMARK":return console.log("FETCH_BOOKMARK reducer"),Object(u.a)({},e,{items:t.payload});default:return e}},note:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_NOTE":return console.log("FETCH_NOTE reducer"),Object(u.a)({},e,{items:t.payload});default:return e}}}),v=[s.a],E=Object(l.e)(p,{},Object(l.d)(l.a.apply(void 0,v))),g=(a(93),a(162),a(163),a(23)),b=a(150),k=a(151),N=a(324),y=(a(164),new(a(326).a));function w(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2?arguments[2]:void 0;y.next({name:e,signal:t,data:a})}function O(){return y.asObservable()}var P=function(e){return Object(n.useEffect)((function(){return w("navbar-transparency"),function(){return w("navbar-transparency",!1)}}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"home"},r.a.createElement("div",{className:"section parallax bg bg2"}),r.a.createElement("div",{className:"section static bg2 even"},r.a.createElement("h3",null,"Secured suite of applications"),r.a.createElement("p",null,"Designed with security as a primary factor from ground up"),r.a.createElement("p",null,"Your passwords never leaves your workstation"),r.a.createElement("p",null,"Our servers have zero knowledge about your password"))))},j=a(8),A=a(3);a(67);function C(e){return null===e||null!==e.match(/^ *$/)}function _(e,t){var a=!1;return t&&t.split(" ").forEach((function(t){e.match(new RegExp("(\\w*".concat(t,"\\w*)"),"gi"))&&(a=!0)})),a}var z=a(51),S=a.n(z),T=a(41),R=a.n(T),x=a(42),I=a.n(x),L="https://protekt-express.herokuapp.com",U=["_id","id","createdAt","lastModifiedAt","userId"],B=["/auth/keys","/auth/signup","/auth/keys/","/auth/signin","/auth/reset","/auth/sendResetCode"];function F(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return S.a.get(L+e,t).then((function(t){return B.find((function(t){return e.includes(t)}))||(t.data=V(t.data,a,n)),Promise.resolve(t)}))}function D(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return B.find((function(t){return e.includes(t)}))||(t=K(t,n,r)),S.a.post(L+e,t,a).then((function(t){return B.find((function(t){return e.includes(t)}))||(t.data=V(t.data,n,r)),Promise.resolve(t)}))}function M(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return B.find((function(t){return e.includes(t)}))||(console.log(t,n),t=K(t,n,r),console.log(t)),S.a.put(L+e,t,a).then((function(t){return console.log(t),B.find((function(t){return e.includes(t)}))||(t.data=V(t.data,n,r)),Promise.resolve(t)}))}function H(e,t){return S.a.delete(L+e,t)}function K(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(Array.isArray(e)){var n=[];return e.forEach((function(e){return n.push(G(e,t,a))})),n}return G(e,t,a)}function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n={};return Object.keys(e).forEach((function(r){!e[r]||a.includes(r)||U.includes(r)?n[r]=e[r]:n[r]=W(t,e[r],"aasd")})),n}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(Array.isArray(e)){var n=[];return e.forEach((function(e){return n.push(q(e,t,a))})),n}return q(e,t,a)}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n={};return Object.keys(e).forEach((function(r){!e[r]||a.includes(r)||U.includes(r)?n[r]=e[r]:n[r]=Y(t,e[r])})),n}function W(e,t,a){var n={cipher:"aes",iter:"12000",ks:256,salt:I.a.enc.Base64.stringify(I.a.enc.Utf8.parse(a))};return R.a.encrypt(e,t,n)}function Y(e,t){return R.a.decrypt(e,t)}var $={API_URL_PRESIGNUP:"/auth/keys",API_URL_SIGNUP:"/auth/signup",API_URL_PRESIGNIN:"/auth/keys/",API_URL_SIGNIN:"/auth/signin",API_URL_RESET:"/auth/reset",API_URL_CODE:"/auth/sendResetCode",API_URL_BOOKMARK:"/bookmark",API_URL_BOOKMARK_IMPORT:"/bookmark/import",API_URL_MAIL:"/bookmark/sendExportMail",API_URL_PREFERENCES:"/user/preferences",API_URL_USER_DETAILS:"/user/details",API_URL_NOTE:"/note"},J=function(e){return function(t){F($.API_URL_BOOKMARK,{headers:{Authorization:"Bearer ".concat(e.token)}},e.password).then((function(e){t({type:"FETCH_BOOKMARK",payload:e.data})}))}},Q=a(325),X=(a(141),function(e){Object(n.useEffect)((function(){var e=document.documentElement.clientWidth,t=window.innerWidth-e;document.documentElement.style.setProperty("--scrollbar-width","".concat(t,"px"))}),[]),Object(n.useEffect)((function(){return w("dialog",e.visible),e.visible?document.body.classList.add("oak-dialog-open"):document.body.classList.remove("oak-dialog-open"),document.addEventListener("keydown",t,!1),function(){return document.removeEventListener("keydown",t,!1)}}),[e.visible]);var t=function(t){27===t.keyCode&&e.visible&&e.toggleVisibility()},a=function(){var t="";return t+=e.small?" small":"",t+=e.fullscreen?" fullscreen":""};return r.a.createElement("div",{className:"oak-dialog"},r.a.createElement("div",{className:e.visible?"dialog show ".concat(a()):"dialog hide ".concat(a())},r.a.createElement("div",{className:e.visible?"container":"container hidetext"},r.a.createElement("div",{className:"dialog-header"},r.a.createElement("div",{className:"container",onClick:e.toggleVisibility},r.a.createElement("i",{className:"material-icons"},"close"),r.a.createElement("div",{className:"text-esc"},"esc"))),e.children)))}),Z=(a(285),function(e){return r.a.createElement("button",{className:"oak-button ".concat(function(){var t=e.theme?e.theme:"";return t+=e.variant?" ".concat(e.variant):"",e.children||(t+=" icon"),t+=e.invert?" invert":"",t+=e.small?" small":"",t+=e.align?" align-".concat(e.align):""}()),onClick:e.action},e.icon&&r.a.createElement("i",{className:"material-icons"},e.icon),e.children&&e.children)}),ee=function(e){return r.a.createElement(X,{small:!0,visible:e.visible,toggleVisibility:e.toggleVisibility},r.a.createElement("div",{className:"dialog-body typography-4 space-top-4 space-bottom-4"},e.text?e.text:"Are you sure you want to continue?"),r.a.createElement("div",{className:"dialog-footer"},e.children&&e.children,!e.children&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{action:e.toggleVisibility,theme:"default",variant:"animate in",align:"left"},r.a.createElement("i",{className:"material-icons"},"close"),"No"),r.a.createElement(Z,{action:function(){e.action(),e.toggleVisibility()},theme:"primary",variant:"animate out",align:"right"},r.a.createElement("i",{className:"material-icons"},"double_arrow"),"Yes"))))},te=function(e){var t=Object(n.useState)(!1),a=Object(A.a)(t,2),o=a[0],i=a[1],c=[];return e.bookmark.tags&&e.bookmark.tags.split(" ").map((function(t){c.push(r.a.createElement("div",{className:"tag",key:t,onClick:function(){return e.searchByTag(t)}},t))})),r.a.createElement("div",{className:"item"},r.a.createElement(ee,{visible:o,toggleVisibility:function(){return i(!o)},action:function(){return e.deleteBookmark(e.id)},text:"Are you sure, you want to delete the bookmark?"}),r.a.createElement("div",{className:"item-container"},r.a.createElement("div",{className:"item-actions"},r.a.createElement("div",{className:"item-edit"},r.a.createElement("i",{onClick:function(){return window.open(e.bookmark.href)},className:"material-icons"},"link")),r.a.createElement("div",{className:"item-edit"},r.a.createElement("i",{onClick:function(){return e.editBookmark(e.bookmark)},className:"material-icons"},"edit")),r.a.createElement("div",{className:"item-delete"},r.a.createElement("i",{onClick:function(){return i(!o)},className:"material-icons"},"delete"))),r.a.createElement("div",{className:"item-content"},r.a.createElement("div",{className:"title typography-4"},e.bookmark.title),r.a.createElement("div",{className:"url typography-6"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.bookmark.href},e.bookmark.href)),r.a.createElement("div",{className:"timestamp typography-6 space-bottom-1"},e.bookmark.createdAt),c)))},ae=(a(286),function(e){var t=Object(n.useState)(!1),a=Object(A.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)(!1),l=Object(A.a)(c,2),s=l[0],u=l[1],m=Object(n.useState)(),d=Object(A.a)(m,2),f=d[0],h=d[1],p=Object(n.useState)(),v=Object(A.a)(p,2),E=v[0],g=v[1],b=Object(n.useState)(),k=Object(A.a)(b,2),N=k[0],y=k[1],P=window.matchMedia("(max-width: 767px)");Object(n.useEffect)((function(){i(P.matches),P.addListener((function(){return i(P.matches)})),h(e.children);var t=O().subscribe((function(e){"sidebar"===e.name&&u(e.signal)}));return function(){return t.unsubscribe()}}),[]),Object(n.useEffect)((function(){h(e.children)}),[e.children]),Object(n.useEffect)((function(){j()}),[f]);var j=function(){r.a.Children.toArray(e.children).forEach((function(e){e.props.main?g(e):e.props.side&&y(e)}))},C=function(){w("sidebar",!s)};return r.a.createElement(r.a.Fragment,null,!o&&r.a.createElement("div",{className:"view-desktop"},N&&r.a.createElement("div",{className:"view-side"},N),r.a.createElement("div",{className:"view-content".concat(N?" side-present":"")},E)),o&&r.a.createElement("div",{className:"view-mobile"},r.a.createElement("div",{className:s?"slider show":"slider hide"},r.a.createElement("div",{className:"topbar",onClick:C},r.a.createElement("div",null,r.a.createElement(Z,{theme:"default",variant:"disabled",action:C},!s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"material-icons"},"expand_more"),e.sideLabel?e.sideLabel:"Menu"),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("i",{className:"material-icons"},"expand_less"),"Collapse")))),r.a.createElement("div",{className:"view-side"},s&&N)),!s&&r.a.createElement("div",{className:"view-main"},E)))}),ne=function(e){return r.a.createElement("div",null,e.children)},re=(a(287),function(e){var t=Object(n.useState)(!1),a=Object(A.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)([{}]),l=Object(A.a)(c,2),s=l[0],u=l[1];Object(n.useEffect)((function(){w("sidebarExpanded",o,{label:e.label})}),[o]),Object(n.useEffect)((function(){i(!!e.show),u(e.elements?e.elements:[]);var t=O().subscribe((function(t){"sidebarExpanded"===t.name&&t.signal&&t.data&&t.data.label!==e.label&&i(!1)}));return function(){return t.unsubscribe()}}),[]);var m=0,d=s.map((function(e){return r.a.createElement("div",{key:m+=1,className:"element",onClick:e.action},r.a.createElement("i",{className:"material-icons"},e.icon),e.label)}));return r.a.createElement("div",{className:"sidebar"},r.a.createElement("div",{className:o?"header active":"header",onClick:function(){return i(!o)}},r.a.createElement("div",{className:"label"},r.a.createElement("i",{className:"material-icons"},e.icon),e.label,void 0!==e.number&&r.a.createElement("div",{className:"number"},e.number)),r.a.createElement("div",{className:"aria"},r.a.createElement("i",{className:o?"material-icons collapse":"material-icons"},"keyboard_arrow_left"))),r.a.createElement("div",{className:o?"content show ".concat(e.animate?"animate in":"static"):"content hide ".concat(e.animate?"animate in":"static")},d,e.children))}),oe=(a(288),function(e){return r.a.createElement("div",{className:"oak-text-field"},r.a.createElement("label",{htmlFor:e.id},e.label),!e.multiline&&r.a.createElement("input",{disabled:e.disabled,autoComplete:"off",className:(e.errorFields&&e.errorFields[e.id]?"error":"")+(e.disabled?" disabled":""),type:e.type?e.type:"text",name:e.id,id:e.id,value:e.data[e.id],onChange:e.handleChange}),e.multiline&&r.a.createElement("textarea",{disabled:e.disabled,className:(e.errorFields&&e.errorFields[e.id]?"error":"")+(e.disabled?" disabled":""),id:e.id,name:e.id,value:e.data[e.id],onChange:e.handleChange}))}),ie=(a(289),a(290),function(e){var t,a=Object(n.useState)(!1),o=Object(A.a)(a,2),i=o[0],c=o[1],l=function(t,a){t.target.name=e.id,t.target.value=a,e.handleChange(t),c(!i)},s=[];return e.elements?s=e.elements.map((function(e){return r.a.createElement("div",{className:"option",key:e,onClick:function(t){return l(t,e)}},e)})):e.objects&&(s=e.objects.map((function(e){return r.a.createElement("div",{className:"option",key:e.key,onClick:function(t){return l(t,e.key)}},e.value)}))),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"oak-select ".concat(function(){var t=e.theme?e.theme:"";return t+=e.variant?" ".concat(e.variant):"",t+=e.width?" ".concat(e.width):""}())},e.label&&r.a.createElement("label",{htmlFor:e.id},e.label),r.a.createElement("div",{className:"select-button",id:e.id,onClick:function(){return c(!i)}},e.elements&&r.a.createElement("div",null,e.data[e.id]),e.objects&&r.a.createElement("div",null,e.objects.find((function(t){return t.key===e.data[e.id]}))&&(null===(t=e.objects)||void 0===t?void 0:t.find((function(t){return t.key===e.data[e.id]})).value)),r.a.createElement("div",null,r.a.createElement("i",{className:"material-icons"},"keyboard_arrow_down"))),r.a.createElement("div",{className:i?"dropdown show":"dropdown hide"},r.a.createElement("div",{className:"dropdown-content"},e.first&&r.a.createElement("div",{className:"option",onClick:function(t){return l(t,e.first)}},e.first),e.firstAction&&r.a.createElement("div",{className:"option",onClick:function(t){return l(t,e.firstAction)}},e.firstAction),s))))}),ce=function(e){var t=Object(n.useState)({rowsPerPage:6,pageNo:1}),a=Object(A.a)(t,2),o=a[0],i=a[1];Object(n.useEffect)((function(){c()}),[o]);var c=function(){e.onChangePage(o.pageNo,o.rowsPerPage)};return r.a.createElement("div",{className:"oak-pagination"},r.a.createElement("div",{className:"space-right-3"},e.label?e.label:"Rows per page"),r.a.createElement("div",{className:"space-right-3"},r.a.createElement(ie,{data:o,id:"rowsPerPage",handleChange:function(e){return t=e,void i(Object(u.a)({},o,Object(j.a)({},t.target.name,t.target.value)));var t},elements:["6","10","20","50"]})),r.a.createElement("div",{className:"page-number space-right-3"},r.a.createElement("div",null,(o.pageNo-1)*o.rowsPerPage+1,"-"," ",o.pageNo*o.rowsPerPage<e.totalRows?o.pageNo*o.rowsPerPage:e.totalRows,"\xa0of\xa0 ",e.totalRows," ")),r.a.createElement("div",{className:"page-nav"},r.a.createElement("div",{className:"space-right-2"},r.a.createElement("i",{className:1===o.pageNo?"material-icons disabled":"material-icons",onClick:function(){1!==o.pageNo&&i(Object(u.a)({},o,{pageNo:o.pageNo-1}))}},"keyboard_arrow_left")),r.a.createElement("div",null,r.a.createElement("i",{className:Math.ceil(e.totalRows/o.rowsPerPage)===o.pageNo?"material-icons disabled":"material-icons",onClick:function(){Math.ceil(e.totalRows/o.rowsPerPage)!==o.pageNo&&i(Object(u.a)({},o,{pageNo:o.pageNo+1}))}},"keyboard_arrow_right"))))},le=function(e){var t=Object(n.useState)(!1),a=Object(A.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)({pageNo:1,rowsPerPage:6}),l=Object(A.a)(c,2),s=l[0],u=l[1],m={addNew:[{label:"New Bookmark",action:function(){return e.selectBookmark(null),void i(!0)},icon:"note_add"}]};function d(t){e.selectBookmark(t),i(!0)}function f(){i(!o)}Object(n.useEffect)((function(){var e=O().subscribe((function(e){"bookmark"===e.name&&e.signal&&(w("notification",!0,{type:"success",message:"".concat("bookmark"," ").concat(e.data.action),duration:5e3}),"deleted"!==e.data.action&&f())}));return function(){return e.unsubscribe()}}));return r.a.createElement("div",{className:"bookmarks"},r.a.createElement(X,{visible:o,toggleVisibility:f},r.a.createElement("div",{className:"dialog-body"},r.a.createElement(oe,{label:"Title",data:e.bookmark,id:"title",handleChange:function(t){return e.handleBookmarkDataChange(t)}}),r.a.createElement(oe,{label:"URL",data:e.bookmark,id:"href",handleChange:function(t){return e.handleBookmarkDataChange(t)}}),r.a.createElement(oe,{label:"Tags",data:e.bookmark,id:"tags",handleChange:function(t){return e.handleBookmarkDataChange(t)}})),r.a.createElement("div",{className:"dialog-footer"},r.a.createElement(Z,{action:f,theme:"default",variant:"outline",align:"left"},r.a.createElement("i",{className:"material-icons"},"close"),"Cancel"),r.a.createElement(Z,{action:e.update,theme:"primary",variant:"animate in",align:"right"},r.a.createElement("i",{className:"material-icons"},"double_arrow"),"Save"))),r.a.createElement(ae,null,r.a.createElement(ne,{main:!0},r.a.createElement(ce,{totalRows:e.view.length,onChangePage:function(e,t){u({pageNo:e,rowsPerPage:t})},label:"Items per page"}),r.a.createElement("div",{className:"space-bottom-2"}),e.view.slice((s.pageNo-1)*s.rowsPerPage,s.pageNo*s.rowsPerPage).map((function(t){return r.a.createElement("div",{key:t._id},r.a.createElement(te,{id:t._id,bookmark:t,editBookmark:d,deleteBookmark:e.deleteBookmark,searchByTag:e.searchByTag}),r.a.createElement("br",null))}))),r.a.createElement(ne,{side:!0},r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"section-main"},r.a.createElement(re,{label:"Add New",elements:m.addNew,icon:"add",animate:!0}),r.a.createElement(re,{label:"Search",icon:"search",animate:!0,number:e.searchPref.filtered?e.view.length:void 0},r.a.createElement("form",{method:"GET",onSubmit:e.search,noValidate:!0},r.a.createElement("div",{className:"space-top-2 space-left-4 space-right-4"},r.a.createElement(oe,{label:"Keywords",id:"searchText",data:e.searchPref,handleChange:function(t){return e.handleSearchPrefDataChange(t)}}))),r.a.createElement("div",{className:"typography-5 space-top-2 space-left-4"},r.a.createElement(Q.a,{checked:e.searchPref.title,onChange:function(){return e.toggleSearchPref("title")},inputProps:{"aria-label":"primary checkbox"}}),"Include title"),r.a.createElement("div",{className:"typography-5 space-top-2 space-left-4"},r.a.createElement(Q.a,{checked:e.searchPref.tags,onChange:function(){return e.toggleSearchPref("tags")},inputProps:{"aria-label":"primary checkbox"}}),"Include tags"),r.a.createElement("div",{className:"typography-5 space-top-2 space-left-4"},r.a.createElement(Q.a,{checked:e.searchPref.href,onChange:function(){return e.toggleSearchPref("href")},inputProps:{"aria-label":"primary checkbox"}}),"Include URL"),e.searchPref.filtered&&r.a.createElement("div",{className:"typography-4 space-top-2 space-left-2"},"Found ",e.view.length," bookmarks matching the search criteria"),r.a.createElement("div",{className:"actionbar-2 space-top-2 space-bottom-2"},r.a.createElement("div",null,r.a.createElement(Z,{action:e.clearSearch,theme:"default"},"Clear")),r.a.createElement("div",null,r.a.createElement(Z,{action:e.search,theme:"primary",variant:"animate in"},"Search")))))))))},se=a(58),ue=Object(c.b)((function(e){return{bookmark:e.bookmark}}),{fetchBookmark:J,saveBookmark:function(e,t){return function(a){M($.API_URL_BOOKMARK,t,{headers:{Authorization:"Bearer ".concat(e.token)}},e.password).then((function(){w("bookmark",!0,{action:t.id?"updated":"created"}),a(J(e))})).catch((function(e){401===e.response.status&&w("session expired")}))}},deleteBookmark:function(e,t){return function(a){H("".concat($.API_URL_BOOKMARK,"/").concat(t),{headers:{Authorization:"Bearer ".concat(e.token)}}).then((function(t){201===t.status&&(w("bookmark",!0,{action:"deleted"}),a(J(e)))})).catch((function(e){401===e.response.status&&w("session expired")}))}}})((function(e){var t=Object(n.useState)({id:void 0,title:"",href:"",tags:""}),a=Object(A.a)(t,2),o=a[0],i=a[1],c=Object(n.useState)({title:!0,tags:!0,href:!0,content:!0,searchText:"",filtered:!1,filterActivator:!1}),l=Object(A.a)(c,2),s=l[0],m=l[1],d=Object(n.useState)(!0),f=Object(A.a)(d,2),h=f[0],p=f[1],v=Object(n.useState)([]),E=Object(A.a)(v,2),g=E[0],b=E[1];Object(n.useEffect)((function(){if(e.location.search){var t=se.parse(e.location.search);t&&t.q&&(t.q.startsWith("tags")&&m(Object(u.a)({},s,{title:!1,tags:!0,href:!0,content:!1})),m(Object(u.a)({},s,{searchText:t.q,filterActivator:!s.filterActivator})))}}),[e.location.search]),Object(n.useEffect)((function(){var t;h&&(null===(t=e.authorization)||void 0===t?void 0:t.isAuth)&&(e.fetchBookmark(e.authorization),p(!1))}),[e.authorization]),Object(n.useEffect)((function(){m(Object(u.a)({},s,{filterActivator:!s.filterActivator}))}),[e.bookmark]),Object(n.useEffect)((function(){k()}),[s.filterActivator]);var k=function(t){var a,n,r;if(t&&t.preventDefault(),C(s.searchText))return b(null===(r=e.bookmark)||void 0===r?void 0:r.items),void m(Object(u.a)({},s,{filtered:!1}));b(null===(a=e.bookmark)||void 0===a||null===(n=a.items)||void 0===n?void 0:n.filter((function(e){return!(!s.title||!_(e.title,s.searchText))||(!(!s.tags||!_(e.tags,s.searchText))||(!(!s.href||!_(e.href,s.searchText))||void 0))}))),m(Object(u.a)({},s,{filtered:!0})),w("sidebar",!1)};return r.a.createElement(le,{view:g,bookmark:o,handleBookmarkDataChange:function(e){i(Object(u.a)({},o,Object(j.a)({},e.currentTarget.name,e.currentTarget.value)))},selectBookmark:function(e){i({id:e?e._id:"",title:e?e.title:"",href:e?e.href:"",tags:e?e.tags:""})},update:function(){C(o.title)?w("notification",!0,{type:"failure",message:"Title / description missing",duration:5e3}):C(o.href)?w("notification",!0,{type:"failure",message:"Website URL / Link is missing",duration:5e3}):(C(o.tags)&&i(Object(u.a)({},o,{tags:"unsorted"})),e.saveBookmark(e.authorization,o))},deleteBookmark:function(t){e.deleteBookmark(e.authorization,t)},searchPref:s,handleSearchPrefDataChange:function(e){m(Object(u.a)({},s,Object(j.a)({},e.currentTarget.name,e.currentTarget.value)))},toggleSearchPref:function(e){m(Object(u.a)({},s,Object(j.a)({},e,!s[e])))},clearSearch:function(){var t;b(null===(t=e.bookmark)||void 0===t?void 0:t.items),p(!1),m(Object(u.a)({},s,{searchText:"",filterActivator:!s.filterActivator})),w("sidebar",!1)},search:k,searchByTag:function(e){m(Object(u.a)({},s,{title:!1,tags:!0,href:!1,searchText:e,filterActivator:!s.filterActivator}))}})})),me=a(40),de=(a(86),function(e){return function(t){F($.API_URL_NOTE,{headers:{Authorization:"Bearer ".concat(e.token)}},e.password).then((function(e){t({type:"FETCH_NOTE",payload:e.data})}))}}),fe=a(148),he=a.n(fe),pe=(a(302),function(e){var t=new he.a.Converter({tables:!0}).makeHtml(e.source);return r.a.createElement("div",{className:"markdown-body"},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t}}))}),ve=function(e){var t=[{key:"one",value:r.a.createElement("div",{className:"select-palette one"})},{key:"two",value:r.a.createElement("div",{className:"select-palette two"})},{key:"three",value:r.a.createElement("div",{className:"select-palette three"})},{key:"four",value:r.a.createElement("div",{className:"select-palette four"})},{key:"five",value:r.a.createElement("div",{className:"select-palette five"})},{key:"six",value:r.a.createElement("div",{className:"select-palette six"})}],a=Object(n.useState)(!1),o=Object(A.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)(!0),s=Object(A.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(""),f=Object(A.a)(d,2),h=(f[0],f[1],[]);return e.note.tags&&e.note.tags.split(" ").map((function(e){h.push(r.a.createElement("div",{key:e,className:"tag"},e))})),r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,{visible:i,toggleVisibility:function(){return c(!i)},action:function(){e.deleteNote(e.note._id||e.note.id)},text:"Are you sure, you want to delete the bookmark?"}),!e.editNote&&r.a.createElement("div",{className:"noteitem"},r.a.createElement("div",{className:"notebook"},r.a.createElement("i",{className:"material-icons"},"insert_drive_file"),e.note.notebook),r.a.createElement("div",{className:"typography-3 space-bottom-1"},e.note.title),h,r.a.createElement("div",{className:"space-bottom-2"}),r.a.createElement(Z,{action:function(){return e.setEditNote(!0)},theme:"secondary",variant:"animate in",align:"left"},r.a.createElement("i",{className:"material-icons"},"edit"),"Edit"),r.a.createElement(Z,{action:function(){return c(!i)},theme:"secondary",variant:"animate in",align:"right"},r.a.createElement("i",{className:"material-icons"},"delete"),"Delete"),r.a.createElement(pe,{source:e.note.content})),e.editNote&&r.a.createElement("div",{className:"noteitem"},r.a.createElement("div",{className:"typography-3 space-bottom-1"},e.note.title),r.a.createElement(Z,{action:function(){var t=e.note.notebook;"<create new>"===t&&(t=e.note.newNotebook),e.saveNote(e.note,!0)},theme:"primary",variant:"animate in",align:"left"},r.a.createElement("i",{className:"material-icons"},"double_arrow"),"Save"),r.a.createElement(Z,{action:function(){return e.setEditNote(!0)},theme:"default",variant:"outline",align:"center"},r.a.createElement("i",{className:"material-icons"},"refresh"),"Undo All"),r.a.createElement(Z,{action:function(){return e.setEditNote(!1)},theme:"default",variant:"outline",align:"center"},r.a.createElement("i",{className:"material-icons"},"close"),"Cancel"),!u&&r.a.createElement(Z,{action:function(){return m(!u)},theme:"default",variant:"outline",align:"right"},r.a.createElement("i",{className:"material-icons"},"visibility"),"Show Preview"),u&&r.a.createElement(Z,{action:m(!u),theme:"default",variant:"outline",align:"right"},r.a.createElement("i",{className:"material-icons"},"visibility_off"),"Hide Preview"),r.a.createElement("div",null,r.a.createElement(ie,{width:"width-25",label:"Flag",data:e.note,id:"flag",handleChange:function(t){return e.handleChange(t)},objects:t})),r.a.createElement("div",null,r.a.createElement(ie,{label:"Notebook",data:e.note,id:"notebook",handleChange:function(t){return e.handleChange(t)},elements:e.notebooks,firstAction:"<create new>"})),r.a.createElement("div",null,"<create new>"===e.note.notebook&&r.a.createElement(oe,{label:"Notebook name",data:e.note,id:"newNotebook",handleChange:function(t){return e.handleChange(t)}})),r.a.createElement(oe,{label:"Title",data:e.note,id:"title",handleChange:function(t){return e.handleChange(t)}}),r.a.createElement(oe,{label:"Tags (separated by blank spaces)",data:e.note,id:"tags",handleChange:function(t){return e.handleChange(t)}}),u&&r.a.createElement("div",{className:"edit-note-view"},r.a.createElement("div",null,r.a.createElement(oe,{label:"Content (Markdown / HTML / Plaintext)",data:e.note,id:"content",multiline:!0,handleChange:function(t){return e.handleChange(t)}})),r.a.createElement("div",null,r.a.createElement("div",{className:"typography-5 space-bottom-1"},"Preview"),r.a.createElement(pe,{source:e.note.content}))),!u&&r.a.createElement(oe,{label:"Content (Markdown / HTML / Plaintext)",data:e.note,id:"content",multiline:!0,handleChange:function(t){return e.handleChange(t)}}),r.a.createElement("div",{className:"space-top-2"})))},Ee=(a(303),function(e){var t=r.a.createElement("i",{className:"material-icons"},e.icon);return r.a.createElement("div",{className:"action-button"},e.leftLabel&&e.rightLabel&&r.a.createElement("button",{type:"button",className:"left ".concat(e.type),onClick:e.leftAction},e.icon&&t,e.leftLabel),e.leftLabel&&e.rightLabel&&r.a.createElement("button",{type:"button",className:"right ".concat(e.type),onClick:e.rightAction},e.icon&&t,e.rightLabel),e.leftLabel&&!e.rightLabel&&r.a.createElement("button",{type:"button",className:"center ".concat(e.type),onClick:e.leftAction},e.icon&&t,e.leftLabel))}),ge=a(304),be=function(e){var t=[];return e.note.tags&&e.note.tags.split(" ").map((function(e){t.push(r.a.createElement(Ee,{leftLabel:e}))})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.selected?"notelink selected":"notelink",onClick:function(){e.selectNote(e.id)}},r.a.createElement("div",{className:"content"},e.note.flag&&r.a.createElement("div",{className:"flag-palette ".concat(e.note.flag)}),e.showTag&&r.a.createElement("div",{className:"notebook"},e.note.notebook),r.a.createElement("div",{className:"title"},e.note.title),r.a.createElement("div",{className:"space-bottom-0"}),"Artboard"!==e.note.type&&r.a.createElement("div",{className:"detail"},ge(e.note.content.substring(0,100))),"Artboard"===e.note.type&&r.a.createElement("div",{className:"detail-artboard"},r.a.createElement("i",{className:"material-icons"},"tv")))),r.a.createElement("div",{className:"separator"}))},ke=[{key:"createdAt",value:"created"},{key:"lastModifiedAt",value:"last modified"},{key:"notebook",value:"notebook"},{key:"title",value:"note name"}],Ne=["ascending","descending"],ye={id:void 0,type:"Notebook",title:"",content:"",tags:"",notebook:"",newNotebook:""},we=function(e){var t,a,o,i=Object(n.useState)(!1),c=Object(A.a)(i,2),l=c[0],s=c[1],u=Object(n.useState)(!1),m=Object(A.a)(u,2),d=m[0],f=m[1],h={addNew:[{label:"New Note",action:function(){return p()},icon:"note_add"},{label:"New Whiteboard",action:function(){return p()},icon:"tv"}]};function p(){e.selectNote(ye),s(!0)}function v(){s(!l)}return Object(n.useEffect)((function(){var e=O().subscribe((function(e){"note"===e.name&&e.signal&&(w("notification",!0,{type:"success",message:"".concat("note"," ").concat(e.data.action),duration:5e3}),"created"===e.data.action?v():"updated"===e.data.action&&f(!1))}));return function(){return e.unsubscribe()}})),r.a.createElement("div",{className:"notes"},r.a.createElement(X,{visible:l,toggleVisibility:v},r.a.createElement("div",{className:"dialog-body"},r.a.createElement("div",null,r.a.createElement(ie,{label:"Notebook",theme:"default",data:e.note,id:"notebook",handleChange:function(t){return e.handleNoteDataChange(t)},elements:e.notebooks,firstAction:"<create new>"})),r.a.createElement("div",null,"<create new>"===e.note.notebook&&r.a.createElement(oe,{label:"Notebook name",data:e.note,id:"newNotebook",handleChange:function(t){return e.handleNoteDataChange(t)}})),r.a.createElement("div",null,r.a.createElement(oe,{label:"Title",data:e.note,id:"title",handleChange:function(t){return e.handleNoteDataChange(t)}})),r.a.createElement("div",null,r.a.createElement(oe,{label:"Tags (separated by blank spaces)",data:e.note,id:"tags",handleChange:function(t){return e.handleNoteDataChange(t)}})),r.a.createElement("div",null,r.a.createElement(oe,{label:"Content (Markdown / HTML / Plaintext)",data:e.note,id:"content",multiline:!0,handleChange:function(t){return e.handleNoteDataChange(t)}}))),r.a.createElement("div",{className:"dialog-footer"},r.a.createElement(Z,{action:v,theme:"default",variant:"outline",align:"left"},r.a.createElement("i",{className:"material-icons"},"close"),"Cancel"),r.a.createElement(Z,{action:e.saveNote,theme:"primary",variant:"animate in",align:"right"},r.a.createElement("i",{className:"material-icons"},"double_arrow"),"Save"))),r.a.createElement(ae,null,r.a.createElement(ne,{main:!0},((null===(t=e.note)||void 0===t?void 0:t._id)||(null===(a=e.note)||void 0===a?void 0:a.id))&&r.a.createElement(ve,{note:e.note,saveNote:e.saveNote,editNote:d,setEditNote:f,deleteNote:e.deleteNote,notebooks:e.notebooks,handleChange:function(t){return e.handleNoteDataChange(t)}})),r.a.createElement(ne,{side:!0},r.a.createElement("div",{className:"filter-container"},r.a.createElement("div",{className:"section-main"},r.a.createElement(re,{label:"Add New",elements:h.addNew,icon:"add",animate:!0}),r.a.createElement(re,{label:"Search",icon:"search",animate:!0,number:e.searchPref.filtered?e.searchResults.length:void 0},r.a.createElement("div",{className:"space-top-1"}),r.a.createElement("form",{method:"GET",onSubmit:e.search,noValidate:!0},r.a.createElement("div",{className:"space-left-4 space-right-4"},r.a.createElement(oe,{label:"Keywords",id:"searchText",data:e.searchPref,handleChange:function(t){return e.handleSearchPrefDataChange(t)}}))),r.a.createElement("div",{className:"typography-5 space-top-2 space-left-4"},r.a.createElement(Q.a,{checked:e.searchPref.title,onChange:function(){return e.toggleSearchPref("title")},inputProps:{"aria-label":"primary checkbox"}}),"Include title"),r.a.createElement("div",{className:"typography-5 space-top-2 space-left-4"},r.a.createElement(Q.a,{checked:e.searchPref.tags,onChange:function(){return e.toggleSearchPref("tags")},inputProps:{"aria-label":"primary checkbox"}}),"Include tags"),r.a.createElement("div",{className:"typography-5 space-top-2 space-left-4"},r.a.createElement(Q.a,{checked:e.searchPref.content,onChange:function(){return e.toggleSearchPref("content")},inputProps:{"aria-label":"primary checkbox"}}),"Include Content"),e.searchPref.filtered&&r.a.createElement("div",{className:"typography-4 space-top-2"},"Found ",e.searchResults.length," notes matching the search criteria"),r.a.createElement("div",{className:"actionbar-2 space-top-2 space-bottom-2"},r.a.createElement("div",null,r.a.createElement(Z,{action:e.clearSearch,theme:"default",variant:"animate none"},"Clear")),r.a.createElement("div",null,r.a.createElement(Z,{action:e.search,theme:"default",variant:"animate in"},"Search")))),r.a.createElement(re,{label:e.searchPref.filtered?"Search results":"All Notes",icon:"notes",number:e.view.length},r.a.createElement("div",{className:"filter-bar"},e.searchResults.length>1&&r.a.createElement("div",null,r.a.createElement(ie,{label:"Notebook",data:e.filterPref,id:"notebookFilter",handleChange:function(t){return e.handleFilterPrefDataChange(t)},elements:e.filterPref.notebookList,first:"all notebooks"})),1===e.searchResults.length&&r.a.createElement("div",null,r.a.createElement(ie,{label:"Notebook",data:e.filterPref,id:"notebookFilter",handleChange:function(t){return e.handleFilterPrefDataChange(t)},elements:e.filterPref.notebookList})),r.a.createElement("div",null),r.a.createElement("div",null,r.a.createElement(ie,{label:"Sort by",data:e.filterPref,id:"sortBy",handleChange:function(t){return e.handleFilterPrefDataChange(t)},objects:ke})),r.a.createElement("div",null,r.a.createElement(ie,{label:"Sort Order",data:e.filterPref,id:"sortOrder",handleChange:function(t){return e.handleFilterPrefDataChange(t)},elements:Ne}))),null===(o=e.view)||void 0===o?void 0:o.map((function(t){var a,n;return r.a.createElement("div",{key:t._id?t._id:t.id},r.a.createElement(be,{selected:!((null===(a=e.note)||void 0===a?void 0:a._id)!==t._id&&(null===(n=e.note)||void 0===n?void 0:n.id)!==t._id),id:t._id,note:t,selectNote:function(){return function(t){e.selectNote(t),w("sidebar",!1)}(t)},showTag:!0}))}))))))))},Oe=a(58),Pe=Object(c.b)((function(e){return{note:e.note}}),{fetchNote:de,saveNote:function(e,t){return function(a){t._id&&(t.id=t._id,t._id=void 0),M($.API_URL_NOTE,t,{headers:{Authorization:"Bearer ".concat(e.token)}},e.password,["attributes"]).then((function(){w("note",!0,{action:t.id?"updated":"created"}),a(de(e))})).catch((function(e){401===e.response.status&&w("session expired")}))}},deleteNote:function(e,t){return function(a){H("".concat($.API_URL_NOTE,"/").concat(t),{headers:{Authorization:"Bearer ".concat(e.token)}}).then((function(t){201===t.status&&(w("note",!0,{action:"deleted"}),a(de(e)))})).catch((function(e){401===e.response.status&&w("session expired")}))}}})((function(e){var t={_id:void 0,id:void 0,type:"Notebook",title:"",content:"",tags:"",notebook:"",newNotebook:""},a=Object(n.useState)(t),o=Object(A.a)(a,2),i=o[0],c=o[1],l=Object(n.useState)({title:!0,tags:!0,content:!0,searchText:"",filtered:!1,filterActivator:!1}),s=Object(A.a)(l,2),m=s[0],d=s[1],f=Object(n.useState)({notebookFilter:"all notebooks",notebookList:Object(me.a)(new Set),sortBy:"lastModifiedAt",sortOrder:"descending",filtered:!1,filterActivator:!1}),h=Object(A.a)(f,2),p=h[0],v=h[1],E=Object(n.useState)(!0),g=Object(A.a)(E,2),b=g[0],k=g[1],N=Object(n.useState)([]),y=Object(A.a)(N,2),O=y[0],P=y[1],z=Object(n.useState)([]),S=Object(A.a)(z,2),T=S[0],R=S[1],x=Object(n.useState)([]),I=Object(A.a)(x,2),L=I[0],U=I[1];Object(n.useEffect)((function(){if(e.location.search){var t=Oe.parse(e.location.search);t&&t.q&&(t.q.startsWith("tags")&&d(Object(u.a)({},m,{title:!1,tags:!0,content:!1})),d(Object(u.a)({},m,{searchText:t.q,filterActivator:!m.filterActivator})))}}),[e.location.search]),Object(n.useEffect)((function(){var t;b&&(null===(t=e.authorization)||void 0===t?void 0:t.isAuth)&&(e.fetchNote(e.authorization),k(!1))}),[e.authorization]),Object(n.useEffect)((function(){var t,a;d(Object(u.a)({},m,{filterActivator:!m.filterActivator}));var n=[];null===(t=e.note)||void 0===t||null===(a=t.items)||void 0===a||a.map((function(e){return n.push(e.notebook)})),U(Array.from(new Set(n)))}),[e.note]),Object(n.useEffect)((function(){B()}),[m.filterActivator]),Object(n.useEffect)((function(){F()}),[p.filterActivator]);var B=function(t){var a,n,r;if(t&&t.preventDefault(),C(m.searchText))return P(null===(r=e.note)||void 0===r?void 0:r.items),d(Object(u.a)({},m,{filtered:!1})),void v(Object(u.a)({},p,{filterActivator:!p.filterActivator}));P(null===(a=e.note)||void 0===a||null===(n=a.items)||void 0===n?void 0:n.filter((function(e){return!(!m.title||!_(e.title,m.searchText))||(!(!m.tags||!_(e.tags,m.searchText))||void 0)}))),d(Object(u.a)({},m,{filtered:!0})),v(Object(u.a)({},p,{filterActivator:!p.filterActivator})),w("sidebar",!1)},F=function(){var e,t,a,n=[],r=[];if(O.map((function(e){(C(p.notebookFilter)||"all notebooks"===p.notebookFilter||e.notebook===p.notebookFilter)&&r.push(e),n.push(e.notebook)})),e=r,t=p.sortBy,a="descending"===p.sortOrder,(r=e.sort((function(e,n){return a?e[t]>n[t]?-1:e[t]<n[t]?1:0:e[t]<n[t]?-1:e[t]>n[t]?1:0}))).length>0){var o=!1;r.map((function(e){e._id!==i.id&&e._id!==i._id||(o=!0)})),o||c(O[0])}v(Object(u.a)({},p,{notebookList:Array.from(new Set(n)),filtered:!0})),R(r)};return r.a.createElement(we,{view:T,notebooks:L,searchResults:O,note:i,handleNoteDataChange:function(e){c(Object(u.a)({},i,Object(j.a)({},e.currentTarget.name,e.currentTarget.value)))},selectNote:function(e){c(e)},deleteNote:function(t){e.deleteNote(e.authorization,t)},saveNote:function(){i?C(i.notebook)||"<create new>"===i.notebook&&C(i.newNotebook)?w("notification",!0,{type:"failure",message:"Notebook not chosen",duration:5e3}):C(i.title)?w("notification",!0,{type:"failure",message:"Note name / title missing",duration:5e3}):(C(i.tags)&&(i.tags="unsorted"),"<create new>"===i.notebook&&(i.notebook=i.newNotebook),e.saveNote(e.authorization,i)):w("notification",!0,{type:"failure",message:"Unknown error",duration:5e3})},searchPref:m,handleSearchPrefDataChange:function(e){d(Object(u.a)({},m,Object(j.a)({},e.currentTarget.name,e.currentTarget.value)))},toggleSearchPref:function(e){d(Object(u.a)({},m,Object(j.a)({},e,!m[e])))},clearSearch:function(){var t;R(null===(t=e.note)||void 0===t?void 0:t.items),k(!1),d(Object(u.a)({},m,{searchText:"",filterActivator:!m.filterActivator})),w("sidebar",!1)},filterPref:p,handleFilterPrefDataChange:function(e){var t;v(Object(u.a)({},p,(t={},Object(j.a)(t,e.currentTarget.name,e.currentTarget.value),Object(j.a)(t,"filterActivator",!p.filterActivator),t)))},search:B})})),je=a(327),Ae=function(){return function(e){e({type:"GET_AUTH"})}},Ce=function(e){return function(t){t({type:"ADD_AUTH",payload:e})}},_e=function(){return function(e){e({type:"REMOVE_AUTH"})}};a(142);function ze(e,t,a){!function(e,t,a){F($.API_URL_BOOKMARK,{headers:{Authorization:"Bearer ".concat(e.token)}},t).then((function(t){t.data.forEach((function(t){t.id=t._id,delete t._id,M($.API_URL_BOOKMARK,t,{headers:{Authorization:"Bearer ".concat(e.token)}},a).then((function(e){return console.log(e)}))}))}))}(e,t,a),function(e,t,a){F($.API_URL_NOTE,{headers:{Authorization:"Bearer ".concat(e.token)}},t).then((function(t){t.data.forEach((function(t){t.id=t._id,delete t._id,M($.API_URL_NOTE,t,{headers:{Authorization:"Bearer ".concat(e.token)}},a).then((function(e){return console.log(e)}))}))}))}(e,t,a)}function Se(e){return F($.API_URL_PRESIGNIN+e,null).then((function(e){return Promise.resolve(e)})).catch((function(e){return Promise.resolve(e.response)}))}function Te(e,t){try{var a=(n=e.password,r=JSON.stringify(t),R.a.decrypt(n,r));return D($.API_URL_SIGNIN,{email:e.email,solution:a},null).then((function(e){return Promise.resolve(e)}))}catch(o){return"ccm: tag doesn't match"===o.message?Promise.resolve({status:401}):Promise.resolve(o)}var n,r}function Re(e,t,a){var n={cipher:"aes",iter:"12000",ks:256,salt:I.a.enc.Base64.stringify(I.a.enc.Utf8.parse(a))};return R.a.encrypt(e,t,n)}var xe=a(58),Ie=Object(c.b)((function(e){return{authorization:e.authorization}}),{getAuth:Ae,addAuth:Ce,removeAuth:_e})(Object(je.a)((function(e){var t=Object(n.useState)({newuser:!1,name:"",email:"",password:"",resetCode:""}),a=Object(A.a)(t,2),o=a[0],i=a[1];Object(n.useEffect)((function(){if(e.location.search){var t=xe.parse(e.location.search);t&&"signup"===t.type&&i(Object(u.a)({},o,{newuser:!0}))}}),[]);var c=function(e){e.preventDefault(),w("notification",!1),w("spinner"),o.email&&o.password?Se(o.email).then((function(e){200===e.status?Te({email:o.email,password:o.password},e.data).then((function(e){200===e.status?(w("notification",!0,{message:"Signed In successfully",type:"success",duration:3e3}),f(e.data,o.password)):401===e.status?w("notification",!0,{message:"Incorrect passphrase",type:"failure",duration:3e3}):w("notification",!0,{message:"Unknown response from server. Please try again or at a later time",type:"failure",duration:3e3})})).catch((function(e){w("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})})):404===e.status&&w("notification",!0,{message:"User name does not exist",type:"failure",duration:3e3})})):w("notification",!0,{type:"failure",message:"Username/password cannot be empty",duration:3e3})},l=function(e){if(e.preventDefault(),w("notification",!1),w("spinner"),o.name&&o.password&&o.email){if(!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(o.email))return void w("notification",!0,{type:"failure",message:"Email ID is invalid",duration:3e3});F($.API_URL_PRESIGNUP,null).then((function(e){return Promise.resolve(e)})).then((function(e){200===e.status&&function(e){return D($.API_URL_SIGNUP,{name:e.name,email:e.email,problem:Re(e.password,e.solution,e.salt),solution:e.solution},null).then((function(e){return Promise.resolve(e.status)}))}({name:o.name,password:o.password,email:o.email,solution:e.data.solution,salt:e.data.salt}).then((function(e){200===e&&(w("notification",!0,{type:"success",message:"Your account has been created. You can login now",duration:3e3}),i(Object(u.a)({},o,{newuser:!o.newuser})))}))}))}else o.name?o.email?o.password||w("notification",!0,{type:"failure",message:"Password cannot be empty",duration:3e3}):w("notification",!0,{type:"failure",message:"Email cannot be empty",duration:3e3}):w("notification",!0,{type:"failure",message:"Name cannot be empty",duration:3e3})},s=function(e){var t=1+99*Math.random();(function(e,t){return D($.API_URL_CODE,e,null).then((function(e){return Promise.resolve(e.status)}))})({email:o.email,resetCode:t}).then((function(t){200===t?"password"===e&&w("notification",!0,{message:"Password sent successfully",type:"success",duration:3e3}):w("notification",!0,{type:"failure",message:"Invalid Email error",duration:3e3})})).catch((function(e){w("notification",!0,{type:"failure",message:"Bad request",duration:3e3})}))},m=function(e){i(Object(u.a)({},o,Object(j.a)({},e.currentTarget.name,e.currentTarget.value)))},d=function(){i(Object(u.a)({},o,{newuser:!o.newuser}))},f=function(t,a){e.addAuth({isAuth:!0,token:t.token,secret:t.secret,name:t.name,email:t.email,password:a}),w("loggedin",!0),e.history.push("/home")};return r.a.createElement("div",{className:"login"},!o.newuser&&r.a.createElement("div",{className:"container"},r.a.createElement("form",{method:"GET",onSubmit:c,noValidate:!0},r.a.createElement("h1",null,"Log In"),r.a.createElement("div",{className:"form"},r.a.createElement(oe,{label:"Username/e-mail",id:"email",data:o,handleChange:function(e){return m(e)}}),r.a.createElement(oe,{label:"Password",id:"password",type:"password",data:o,handleChange:function(e){return m(e)}})),r.a.createElement("br",null),r.a.createElement(Z,{theme:"primary",variant:"animate in",action:c},"Sign In"),r.a.createElement("br",null),r.a.createElement("br",null),"Don't have an account? \xa0"," ",r.a.createElement(Z,{theme:"secondary",variant:"outline",action:d},"Sign Up"),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(Z,{action:function(){C(o.email)?w("notification",!0,{message:"Email cannot be empty",type:"failure",duration:5e3}):s("password")}},"Forgot password ?")),o.newuser&&r.a.createElement("div",{className:"container"},r.a.createElement("form",{method:"GET",onSubmit:l,noValidate:!0},r.a.createElement("h1",null,"Sign Up"),r.a.createElement("div",{className:"form"},r.a.createElement(oe,{label:"Name",id:"name",data:o,handleChange:function(e){return m(e)}}),r.a.createElement(oe,{label:"Email / User Name",id:"email",data:o,handleChange:function(e){return m(e)}}),r.a.createElement(oe,{label:"Password",id:"password",type:"password",data:o,handleChange:function(e){return m(e)}})),r.a.createElement("br",null),r.a.createElement(Z,{theme:"primary",variant:"animate in",action:l},"Create account"),r.a.createElement("br",null),r.a.createElement("br",null),"Already have a account? \xa0"," ",r.a.createElement(Z,{theme:"secondary",variant:"outline",action:d},"Sign In"))))}))),Le=Object(c.b)((function(e){return{authorization:e.authorization}}),{getAuth:Ae})((function(e){return Object(n.useEffect)((function(){e.getAuth()}),[e.authorization.isAuth]),r.a.createElement(r.a.Fragment,null,e.authorization.isAuth&&r.a.createElement(g.Route,{path:e.path,render:e.render}))})),Ue=Object(c.b)((function(e){return{authorization:e.authorization}}),{getAuth:Ae,addAuth:Ce,removeAuth:_e})((function(e){return Object(n.useEffect)((function(){e.authorization.isAuth||console.log(e),e.getAuth()}),[e.authorization.isAuth]),r.a.createElement(r.a.Fragment,null)})),Be=function(){return function(e){e({type:"GET_PROFILE"})}},Fe=function(e){return function(t){t({type:"SET_PROFILE",payload:e})}},De=function(){var e=Object(n.useState)(""),t=Object(A.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){var e=O().subscribe((function(e){"dialog"===e.name&&(e.signal?o("backdrop-fade"):o(""))}));return function(){return e.unsubscribe()}}),[]),r.a.createElement("div",{className:a})},Me=(a(306),function(){var e=Object(n.useState)(!1),t=Object(A.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)({type:void 0,message:void 0}),c=Object(A.a)(i,2),l=c[0],s=c[1];return Object(n.useEffect)((function(){var e=O().subscribe((function(e){"notification"===e.name&&(e.signal?(s(e.data),o(!1),e.data&&e.data.duration&&setTimeout((function(){w("notification",!1)}),e.data.duration)):s({type:void 0,message:void 0})),"spinner"===e.name&&o(e.signal)}));return function(){return e.unsubscribe()}}),[]),r.a.createElement(r.a.Fragment,null,l&&r.a.createElement("div",{className:"notification ".concat(null===l||void 0===l?void 0:l.type)},r.a.createElement("div",{className:"message"},null===l||void 0===l?void 0:l.message)),a&&r.a.createElement("div",{className:"lds-roller"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),He=(a(59),a(63)),Ke=a.n(He),Ge=a(64),Ve=a.n(Ge),qe=a(34),We=function(e){return r.a.createElement("div",{className:"links"},e.authorization.isAuth&&r.a.createElement(r.a.Fragment,null,r.a.createElement(qe.a,{to:"/bookmarks",className:"navitem",activeClassName:"active"},"Bookmarks"),r.a.createElement(qe.a,{to:"/notes",className:"navitem",activeClassName:"active"},"Notes"),r.a.createElement(qe.a,{to:"/settings",className:"navitem",activeClassName:"active"},"Settings"),r.a.createElement(qe.a,{to:"/help",className:"navitem",activeClassName:"active"},"Help")))},Ye=function(e){return Object(n.useEffect)((function(){e.getProfile()}),[]),r.a.createElement("div",{className:e.transparent?"navbar desktop transparent":"navbar desktop"},r.a.createElement("div",{className:"left"},!e.transparent&&"theme_light"===e.profile.theme&&r.a.createElement("img",{className:"logo",src:Ve.a,alt:"Protekt logo"}),(e.transparent||"theme_dark"===e.profile.theme)&&r.a.createElement("img",{className:"logo",src:Ke.a,alt:"Protekt logo"}),r.a.createElement(We,{authorization:e.authorization,profile:e.profile})),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:"action"},e.authorization.isAuth&&r.a.createElement(Z,{theme:"default",variant:"outline",small:!0,action:e.toggleSettings},r.a.createElement("i",{className:"material-icons"},"brush"),"Appearance"),e.authorization.isAuth&&r.a.createElement(Z,{theme:"default",variant:"outline",small:!0,action:e.logout()},r.a.createElement("i",{className:"material-icons"},"power_settings_new"),"Logout"),!e.authorization.isAuth&&r.a.createElement(Z,{theme:"default",variant:"outline",small:!0,action:function(){return e.login("signin")}},r.a.createElement("i",{className:"material-icons"},"person"),"Login"),!e.authorization.isAuth&&r.a.createElement(Z,{theme:"default",variant:"outline",small:!0,action:function(){return e.login("signup")}},r.a.createElement("i",{className:"material-icons"},"person_add"),"Signup"))))},$e=function(e){var t=Object(n.useState)(!1),a=Object(A.a)(t,2),o=a[0],i=a[1];return Object(n.useEffect)((function(){e.getProfile()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:e.transparent?"navbar mobile transparent":"navbar mobile"},r.a.createElement("div",{className:"left"},!e.transparent&&"theme_light"===e.profile.theme&&r.a.createElement("img",{className:"logo",src:Ve.a,alt:"Curate logo"}),(e.transparent||"theme_dark"===e.profile.theme)&&r.a.createElement("img",{className:"logo",src:Ke.a,alt:"Curate logo"})),r.a.createElement("div",{className:"right"},r.a.createElement("div",{className:o?"menu active":"menu",onClick:function(){return i(!o)}},r.a.createElement("div",null)))),r.a.createElement("div",{className:o?"slider show":"slider hide",onClick:function(){return i(!o)}},r.a.createElement("div",{className:o?"container":"container hidetext",onClick:function(){return i(!o)}},r.a.createElement("div",{className:"action"},r.a.createElement("div",{className:"settings-icon",onClick:e.toggleSettings},e.authorization.isAuth&&r.a.createElement(Z,{theme:"default",variant:"outline",small:!0,action:e.toggleSettings},r.a.createElement("i",{className:"material-icons"},"brush"),"Appearance")),r.a.createElement("div",{className:"buttons"},e.authorization.isAuth&&r.a.createElement(Z,{theme:"default",variant:"outline",small:!0,action:e.logout()},r.a.createElement("i",{className:"material-icons"},"power_settings_new"),"Logout"),!e.authorization.isAuth&&r.a.createElement(Z,{theme:"secondary",variant:"animate none",small:!0,action:function(){return e.login("signin")}},r.a.createElement("i",{className:"material-icons"},"person"),"Login"),!e.authorization.isAuth&&r.a.createElement(Z,{theme:"secondary",variant:"animate none",small:!0,action:function(){return e.login("signup")}},r.a.createElement("i",{className:"material-icons"},"person_add"),"Signup"))),r.a.createElement(We,{authorization:e.authorization,profile:e.profile}))))},Je=Object(c.b)((function(e){return{profile:e.profile}}),{getProfile:Be,setProfile:Fe,reloadProfile:function(e){return function(t){F($.API_URL_PREFERENCES,{headers:{Authorization:"Bearer ".concat(e.token)}},e.password).then((function(e){console.log(e),t({type:"SET_PROFILE",payload:e.data})}))}}})(Object(je.a)(Object(g.withRouter)((function(e){var t=Object(n.useState)({visible:!1,mobilemenu:"hide",chooseTheme:!1,showSettings:!1,transparentNavBar:!1,firstLoad:!0}),a=Object(A.a)(t,2),o=a[0],i=a[1];Object(n.useEffect)((function(){e.getProfile()}),[]),Object(n.useEffect)((function(){var t=O().subscribe((function(t){"navbar-transparency"===t.name&&i(Object(u.a)({},o,{transparentNavBar:t.signal})),"loggedin"===t.name&&(e.reloadProfile(e.authorization),i(Object(u.a)({},o,{firstLoad:!1}))),"loggedout"===t.name&&e.history.push("/home")}));return function(){return t.unsubscribe()}})),Object(n.useEffect)((function(){var t;o.firstLoad&&(null===(t=e.authorization)||void 0===t?void 0:t.isAuth)&&(e.reloadProfile(e.authorization),i(Object(u.a)({},o,{firstLoad:!1})))}),[e.authorization]);var c=function(t){e.setProfile(Object(u.a)({},e.profile,{textSize:t}))},l=function(t){e.setProfile(Object(u.a)({},e.profile,{themeColor:t}))},s=function(t){e.history.push("/login?type=".concat(t))},m=function(){i(Object(u.a)({},o,{showSettings:!o.showSettings}))};return r.a.createElement("div",{className:"nav"},r.a.createElement(Ye,Object.assign({},e,{logout:function(){return e.logout()},login:s,toggleSettings:function(){return m()},transparent:o.transparentNavBar})),r.a.createElement($e,Object.assign({},e,{logout:function(){return e.logout()},login:s,toggleSettings:function(){return m()},transparent:o.transparentNavBar})),r.a.createElement(X,{visible:o.showSettings,toggleVisibility:function(){return m()}},r.a.createElement("div",{className:"dialog-body"},r.a.createElement("div",{className:"settings"},r.a.createElement("div",null,"Dark mode"),r.a.createElement("div",null,r.a.createElement(Q.a,{checked:"theme_dark"===e.profile.theme,onChange:function(){"theme_dark"===e.profile.theme?e.setProfile(Object(u.a)({},e.profile,{theme:"theme_light"})):e.setProfile(Object(u.a)({},e.profile,{theme:"theme_dark"}))},inputProps:{"aria-label":"primary checkbox"}})),r.a.createElement("div",null,"Text Size"),r.a.createElement("div",null,r.a.createElement("div",{className:"text-size size-1 space-right-1 ".concat("textsize_tiny"===e.profile.textSize?"active":""),onClick:function(){return c("textsize_tiny")}},"Az"),r.a.createElement("div",{className:"text-size size-2 space-right-1 ".concat("textsize_small"===e.profile.textSize?"active":""),onClick:function(){return c("textsize_small")}},"Az"),r.a.createElement("div",{className:"text-size size-3 space-right-1 ".concat("textsize_medium"===e.profile.textSize?"active":""),onClick:function(){return c("textsize_medium")}},"Az"),r.a.createElement("div",{className:"text-size size-4 ".concat("textsize_large"===e.profile.textSize?"active":""),onClick:function(){return c("textsize_large")}},"Az")),r.a.createElement("div",{className:"typography-5"},"Color Scheme"),r.a.createElement("div",null,r.a.createElement("div",{className:"theme-color color-1",onClick:function(){return l("themecolor1")}},r.a.createElement("i",{className:"material-icons"},"themecolor1"===e.profile.themeColor&&"check")),r.a.createElement("div",{className:"theme-color color-2",onClick:function(){return l("themecolor2")}},r.a.createElement("i",{className:"material-icons"},"themecolor2"===e.profile.themeColor&&"check")),r.a.createElement("div",{className:"theme-color color-3",onClick:function(){return l("themecolor3")}},r.a.createElement("i",{className:"material-icons"},"themecolor3"===e.profile.themeColor&&"check")),r.a.createElement("div",{className:"theme-color color-4",onClick:function(){return l("themecolor4")}},r.a.createElement("i",{className:"material-icons"},"themecolor4"===e.profile.themeColor&&"check")),r.a.createElement("div",{className:"theme-color color-5",onClick:function(){return l("themecolor5")}},r.a.createElement("i",{className:"material-icons"},"themecolor5"===e.profile.themeColor&&"check")),r.a.createElement("div",{className:"theme-color color-6",onClick:function(){return l("themecolor6")}},r.a.createElement("i",{className:"material-icons"},"themecolor6"===e.profile.themeColor&&"check"))))),r.a.createElement("div",{className:"dialog-footer"},r.a.createElement(Z,{theme:"primary",variant:"animate none",action:function(){return m()}},"Close"))))})))),Qe=(a(39),function(e,t){return console.log(e),D($.API_URL_BOOKMARK_IMPORT,e,{headers:{Authorization:"Bearer ".concat(t.token)}},t.password).then((function(e){return Promise.resolve(e)}))}),Xe=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"typography-3"},"Import Bookmarks"),r.a.createElement("div",{className:"space-top-2"},r.a.createElement("label",{htmlFor:"import_bookmark",className:"file-upload"},r.a.createElement("input",{id:"import_bookmark",type:"file",name:"file",onChange:function(t){t.preventDefault();var a=new FileReader;w("spinner"),a.onload=function(t){Qe({content:t.target.result},e.authorization).then((function(e){w("notification",!0,{message:"Imported (".concat(e.data.length,") bookmarks successfully"),type:"success",duration:6e3})}))},a.readAsText(t.target.files[0]),t.target.value=""}}),"Import")))};var Ze=function(e){var t=function(t){var a,n;(a={email:e.email,content:t},n={headers:{Authorization:"Bearer ".concat(e.authorization.token)}},D($.API_URL_MAIL,a,{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){return Promise.resolve(e.status)}))).then((function(e){200===e&&w("notification",!0,{message:"Check your mail for bookmark attachment",type:"success",duration:3e3})})).catch((function(e){w("notification",!0,{type:"failure",message:"Bad request",duration:3e3})}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"typography-3 space-top-4"},"Export Bookmarks"),r.a.createElement("div",{className:"space-top-2"},r.a.createElement(Z,{theme:"secondary",variant:"animate in",action:function(){F($.API_URL_BOOKMARK,{headers:{Authorization:"Bearer ".concat(e.authorization.token)}},e.authorization.password).then((function(e){var a='<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8"><TITLE>Bookmarks</TITLE><H1>Bookmarks</H1>';e.data.map((function(e){var t="".concat('<DL><p><DT><A HREF="').concat(e.href,'">').concat(e.title,"</A>")+"</DL><p>";a+=t})),console.log(a),t(a)}))}},"Export")))},et=function(e){var t=function(t){e.persistProfile(e.authorization,Object(u.a)({},e.profile,{textSize:t}))},a=function(t){e.persistProfile(e.authorization,Object(u.a)({},e.profile,{themeColor:t}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"typography-3 space-top-4"},"Appearance"),r.a.createElement("div",{className:"appearance"},r.a.createElement("div",{className:"typography-5"},"Dark mode"),r.a.createElement("div",null,r.a.createElement(Q.a,{checked:"theme_dark"===e.profile.theme,onChange:function(){"theme_dark"===e.profile.theme?e.persistProfile(e.authorization,Object(u.a)({},e.profile,{theme:"theme_light"})):e.persistProfile(e.authorization,Object(u.a)({},e.profile,{theme:"theme_dark"}))},inputProps:{"aria-label":"primary checkbox"}})),r.a.createElement("div",{className:"typography-5 space-bottom-2"},"Text Size"),r.a.createElement("div",{className:" space-bottom-2"},r.a.createElement("div",{className:"text-size size-1 space-right-1 ".concat("textsize_tiny"===e.profile.textSize?"active":""),onClick:function(){return t("textsize_tiny")}},"Az"),r.a.createElement("div",{className:"text-size size-2 space-right-1 ".concat("textsize_small"===e.profile.textSize?"active":""),onClick:function(){return t("textsize_small")}},"Az"),r.a.createElement("div",{className:"text-size size-3 space-right-1 ".concat("textsize_medium"===e.profile.textSize?"active":""),onClick:function(){return t("textsize_medium")}},"Az"),r.a.createElement("div",{className:"text-size size-4 ".concat("textsize_large"===e.profile.textSize?"active":""),onClick:function(){return t("textsize_large")}},"Az")),r.a.createElement("div",{className:"typography-5"},"Color Scheme"),r.a.createElement("div",null,r.a.createElement("div",{className:"theme-color color-1",onClick:function(){return a("themecolor1")}},r.a.createElement("i",{className:"material-icons"},"themecolor1"===e.profile.themeColor&&"check")),r.a.createElement("div",{className:"theme-color color-2",onClick:function(){return a("themecolor2")}},r.a.createElement("i",{className:"material-icons"},"themecolor2"===e.profile.themeColor&&"check")),r.a.createElement("div",{className:"theme-color color-3",onClick:function(){return a("themecolor3")}},r.a.createElement("i",{className:"material-icons"},"themecolor3"===e.profile.themeColor&&"check")),r.a.createElement("div",{className:"theme-color color-4",onClick:function(){return a("themecolor4")}},r.a.createElement("i",{className:"material-icons"},"themecolor4"===e.profile.themeColor&&"check")),r.a.createElement("div",{className:"theme-color color-5",onClick:function(){return a("themecolor5")}},r.a.createElement("i",{className:"material-icons"},"themecolor5"===e.profile.themeColor&&"check")),r.a.createElement("div",{className:"theme-color color-6",onClick:function(){return a("themecolor6")}},r.a.createElement("i",{className:"material-icons"},"themecolor6"===e.profile.themeColor&&"check")))))},tt=function(e){var t=Object(n.useState)({name:"",email:""}),a=Object(A.a)(t,2),o=a[0],i=a[1],c=function(e){i(Object(u.a)({},o,Object(j.a)({},e.currentTarget.name,e.currentTarget.value)))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"typography-3 space-top-4"},"User Account"),r.a.createElement("div",null,r.a.createElement(oe,{label:"Name",data:o,id:"name",handleChange:function(e){return c(e)}})),r.a.createElement("div",null,r.a.createElement(oe,{label:"Email",data:o,id:"email",handleChange:function(e){return c(e)}})),r.a.createElement("div",null,r.a.createElement(Z,{theme:"secondary",variant:"animate in",action:function(){C(o.name)?w("notification",!0,{message:"Name not provided",type:"failure",duration:5e3}):C(o.email)?w("notification",!0,{message:"Email not provided",type:"failure",duration:5e3}):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(o.email)?e.updateUserDetailsImpl(o,"user"):w("notification",!0,{type:"failure",message:"Email ID is invalid",duration:3e3})}},"Update details")))},at=function(e){var t=Object(n.useState)({oldPassword:"",newPassword:"",repeatPassword:""}),a=Object(A.a)(t,2),o=a[0],i=a[1],c=function(e){i(Object(u.a)({},o,Object(j.a)({},e.currentTarget.name,e.currentTarget.value)))},l=function(t){Se(e.email).then((function(t){200===t.status&&Te({email:e.email,password:o.oldPassword},t.data).then((function(t){200===t.status?e.updateUserDetailsImpl({password:o.newPassword},"password"):401===t.status?w("notification",!0,{message:"Incorrect passphrase",type:"failure",duration:3e3}):w("notification",!0,{message:"Unknown response from server. Please try again or at a later time",type:"failure",duration:3e3})})).catch((function(e){w("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})}))}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"typography-3 space-top-4"},"Password"),r.a.createElement("div",null,r.a.createElement(oe,{type:"password",label:"Old Password",data:o,id:"oldPassword",handleChange:function(e){return c(e)}})),r.a.createElement("div",null,r.a.createElement(oe,{type:"password",label:"New Password",data:o,id:"newPassword",handleChange:function(e){return c(e)}})),r.a.createElement("div",null,r.a.createElement(oe,{type:"password",label:"Repeat New Password",data:o,id:"repeatPassword",handleChange:function(e){return c(e)}})),r.a.createElement("div",null,r.a.createElement(Z,{theme:"secondary",variant:"animate in",action:function(){C(o.oldPassword)?w("notification",!0,{message:"Old password not provided",type:"failure",duration:5e3}):C(o.newPassword)||C(o.repeatPassword)?w("notification",!0,{message:"New password not provided",type:"failure",duration:5e3}):o.newPassword===o.repeatPassword?l("oldpassword"):w("notification",!0,{message:"New password not provided",type:"failure",duration:5e3})}},"Change Password")))},nt=Object(c.b)((function(e){return{profile:e.profile}}),{getProfile:Be,setProfile:Fe,persistProfile:function(e,t){return function(a){M($.API_URL_PREFERENCES,t,{headers:{Authorization:"Bearer ".concat(e.token)}},e.password).then((function(e){a({type:"SET_PROFILE",payload:e.data})}))}}})(Object(je.a)((function(e){var t=Object(n.useState)(""),a=Object(A.a)(t,2),o=a[0],i=a[1];Object(n.useEffect)((function(){i(e.authorization.email?e.authorization.email:"")}),[]);var c=function(t,a){(function(e,t,a){return console.log(e,t),F($.API_URL_PRESIGNUP,null).then((function(n){if(200===n.status){var r={};return r=a&&"password"===a?{problem:Re(e.password,n.data.solution,n.data.salt),solution:n.data.solution}:{name:e.name,email:e.email},M($.API_URL_USER_DETAILS,r,{headers:{Authorization:"Bearer ".concat(t.token)}},t.password,["problem","solution","email","name"]).then((function(a){return ze(t,t.password,e.password),Promise.resolve(a)}))}}))})({name:null===t||void 0===t?void 0:t.name,email:null===t||void 0===t?void 0:t.email,password:null===t||void 0===t?void 0:t.password},e.authorization,a).then((function(n){201===n.status?"password"===a?w("notification",!0,{message:"Password updated successfully",type:"success",duration:3e3}):(e.cookies.set("name",null===t||void 0===t?void 0:t.name),e.cookies.set("email",null===t||void 0===t?void 0:t.email),w("notification",!0,{message:"User account updated successfully",type:"success",duration:3e3})):w("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})})).catch((function(e){w("notification",!0,{type:"failure",message:"Unknown error. Please try again or at a later time",duration:3e3})}))};return r.a.createElement("div",{className:"settings"},r.a.createElement(ae,{sideLabel:"More options"},r.a.createElement(ne,{main:!0},r.a.createElement(Xe,{authorization:e.authorization}),r.a.createElement(Ze,{authorization:e.authorization,email:o}),r.a.createElement(et,{authorization:e.authorization,profile:e.profile,persistProfile:e.persistProfile}),r.a.createElement(tt,{authorization:e.authorization,updateUserDetailsImpl:c}),r.a.createElement(at,{authorization:e.authorization,updateUserDetailsImpl:c,email:o}))))}))),rt=a(58),ot=Object(c.b)((function(e){return{authorization:e.authorization}}),{getAuth:Ae,addAuth:Ce,removeAuth:_e})((function(e){var t=Object(n.useState)({password:"",repeatPassword:"",resetCode:""}),a=Object(A.a)(t,2),o=a[0],i=a[1];Object(n.useEffect)((function(){if(e.location.search){var t=rt.parse(e.location.search);t.code?i(Object(u.a)({},o,{resetCode:t.code})):e.history.push("/home")}}));var c=function(e){i(Object(u.a)({},o,Object(j.a)({},e.currentTarget.name,e.currentTarget.value)))},l=function(){C(o.password)?w("notification",!0,{message:"password not provided",type:"failure",duration:5e3}):C(o.repeatPassword)||C(o.repeatPassword)?w("notification",!0,{message:"Repeat password not provided",type:"failure",duration:5e3}):o.password===o.repeatPassword?s("password"):w("notification",!0,{message:"Password is not matching",type:"failure",duration:5e3})},s=function(e){(function(e,t){return F($.API_URL_PRESIGNUP,null).then((function(a){if(200===a.status){var n={};return t&&"password"===t&&(n={problem:Re(e.password,a.data.solution,a.data.salt),solution:a.data.solution,resetCode:e.resetCode}),D($.API_URL_RESET,n,null).then((function(e){return Promise.resolve(e.status)}))}}))})({password:o.password,resetCode:o.resetCode},e).then((function(t){200===t?"password"===e&&w("notification",!0,{message:"Password Changed successfully",type:"success",duration:3e3}):w("notification",!0,{type:"failure",message:"Invalid request",duration:3e3})})).catch((function(e){w("notification",!0,{type:"failure",message:"Bad request",duration:3e3})}))};return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"container"},r.a.createElement("form",{method:"GET",onSubmit:l,noValidate:!0},r.a.createElement("h1",null,"Reset password"),r.a.createElement("div",{className:"form"},r.a.createElement(oe,{label:"Password",id:"password",type:"password",data:o,handleChange:function(e){return c(e)}}),r.a.createElement(oe,{label:"Repeat Password",id:"repeatPassword",type:"password",data:o,handleChange:function(e){return c(e)}})),r.a.createElement("br",null),r.a.createElement(Z,{theme:"primary",variant:"animate in",action:l},"Submit"))))})),it={themecolor1:ct("#C4005B"),themecolor2:ct("#803BC2"),themecolor3:ct("#E74443"),themecolor4:ct("#29BE3B"),themecolor5:ct("#ffe20f"),themecolor6:ct("#4d4dff")};function ct(e){return Object(k.a)({palette:{primary:{main:e},secondary:{main:e}}})}var lt=Object(c.b)((function(e){return{authorization:e.authorization,profile:e.profile}}),{getAuth:Ae,addAuth:Ce,removeAuth:_e,getProfile:Be})((function(e){Object(n.useEffect)((function(){e.getProfile(),e.getAuth()}),[]),Object(n.useEffect)((function(){var e=O().subscribe((function(e){"session expired"===e.name&&t(null,"failure","Session expired. Login again")}));return function(){return e.unsubscribe()}}));var t=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"You have been logged out";e.removeAuth(),w("notification",!0,{type:a,message:n,duration:3e3}),w("loggedout",!0)};return r.a.createElement("div",{className:"App ".concat(e.profile.theme," ").concat(e.profile.textSize," ").concat(e.profile.themeColor)},r.a.createElement(b.HashRouter,null,r.a.createElement(Ue,null),r.a.createElement(De,null),r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"body-content"},r.a.createElement(Me,null),r.a.createElement(N.a,{theme:it[e.profile.themeColor]},r.a.createElement(Je,Object.assign({},e,{logout:function(){return t}})),r.a.createElement(g.Route,{exact:!0,path:"/",render:function(a){return r.a.createElement(P,Object.assign({},e,a,{logout:function(){return t}}))}}),r.a.createElement(g.Route,{path:"/home",render:function(a){return r.a.createElement(P,Object.assign({},e,a,{logout:function(){return t}}))}}),r.a.createElement(g.Route,{path:"/login",render:function(a){return r.a.createElement(Ie,Object.assign({},e,a,{logout:function(){return t}}))}}),r.a.createElement(g.Route,{path:"/reset",render:function(a){return r.a.createElement(ot,Object.assign({},e,a,{logout:function(){return t}}))}}),r.a.createElement(Le,{path:"/bookmarks",render:function(a){return r.a.createElement(ue,Object.assign({},e,a,{logout:t}))}}),r.a.createElement(Le,{path:"/notes",render:function(a){return r.a.createElement(Pe,Object.assign({},e,a,{logout:function(){return t}}))}}),r.a.createElement(g.Route,{path:"/settings",render:function(a){return r.a.createElement(nt,Object.assign({},e,a,{logout:function(){return t}}))}}))))))})),st=function(e){return r.a.createElement(c.a,{store:E},r.a.createElement(lt,e))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(st,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},39:function(e,t,a){},59:function(e,t,a){},63:function(e,t,a){e.exports=a.p+"static/media/protekt_white.0157e466.svg"},64:function(e,t,a){e.exports=a.p+"static/media/protekt_black.f386b1d6.svg"},67:function(e,t,a){},86:function(e,t,a){},93:function(e,t,a){}},[[152,1,2]]]);
//# sourceMappingURL=main.b6ad064d.chunk.js.map